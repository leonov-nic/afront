const __vite__fileDeps=["assets/not-found-COWNzj3d.js","assets/react-Dio0hGxI.js","assets/mui-Kk0pvYWy.js","assets/vendor-BhmLflw8.js","assets/react-CYivYX3d.css","assets/not-found-C0istyNO.css","assets/storage-BVaXMhBf.js","assets/mui-x-data-grid-CzUmpu9E.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var zt=Object.defineProperty;var Vt=(t,o,n)=>o in t?zt(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;var ue=(t,o,n)=>Vt(t,typeof o!="symbol"?o+"":o,n);import{r as m,j as e,g as Bt,_ as Pt,u as Ut,h as Qt,k as Ie,l as _e,L as rt,B as y,H as it,N as Yt,m as Zt,n as Gt,o as Kt,p as be,q as Xt,P as eo,Q as to}from"./react-Dio0hGxI.js";import{R as oo,S as no,f as H,U as ao,V as ro,W as io,X as so,Y as lo,Z as C,$ as ve,u as S,a0 as N,a1 as _,a2 as J,a3 as g,a4 as L,a5 as W,a6 as z,a7 as f,a8 as b,a9 as co,aa as mo,ab as uo,ac as po}from"./vendor-BhmLflw8.js";import{s as ce,a2 as Re,A as R,T as M,ab as ne,J as ho,ac as xo,ad as st,ae as $,af as lt,ag as go,w as ct,a3 as I,ah as dt,E as se,ai as fo,aj as V,ak as mt,al as T,am as Pe,an as bo,i as yo,ao as jo,ap as Co,aq as wo,ar as So,as as U,at as Q,au as Y,av as ko,aw as p,ax as No,ay as Oo,az as Ue,aA as Qe,aB as ut,aC as Lo,aD as Ye,aE as To,a0 as ye,a6 as He,a1 as Ao,aF as pt,aG as ht,aH as Io,aI as Do,aJ as Fo,aK as $o,aL as Ze,a4 as Eo,aM as Ho,aN as _o}from"./mui-Kk0pvYWy.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();const vo="modulepreload",Ro=function(t){return"/"+t},Ge={},xt=function(o,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),i=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.all(n.map(c=>{if(c=Ro(c),c in Ge)return;Ge[c]=!0;const u=c.endsWith(".css"),x=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${x}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":vo,u||(d.as="script",d.crossOrigin=""),d.href=c,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((s,h)=>{d.addEventListener("load",s),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}return a.then(()=>o()).catch(l=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l})},Mo={font:{mini:"11px",small:"12px",semibase:"14px",base:"16px",upperbase:"18px",heading:"32px",large:"64px"},color:{curiousBlue:"#247cc1",nepal:"#96b8cc",lightSeaGreen:"#17c1bc",mulledWine:"#574f69",white:"#ffffff",black:"#000000",bg:"#f5f5f5",red:"#e44848",chambray:"#41566d",chambrayLight:"#4a6079",blueCharcoal:"#1b232d",gray:"#282828",grayFormText:"#f5f5f5",grayLight:"rgba(40, 40, 40, 0.2)"}},qo="/assets/inter-v12-cyrillic_latin-700-zjq7vj46.woff",Jo="/assets/inter-v12-cyrillic_latin-700-C9Ju1p82.woff2",Wo="/assets/inter-v12-cyrillic_latin-regular-Do6di7-F.woff",zo="/assets/inter-v12-cyrillic_latin-regular-BDlNwcp7.woff2",Vo=oo`
  @font-face {
    font-style: normal;
    font-weight: 700;
    font-family: "Inter";
    font-display: swap;
    src: url(${Jo}) format('woff2'), url(${qo}) format("woff");
  }

  @font-face {
    font-style: normal;
    font-weight: 400;
    font-family: "Inter";
    font-display: swap;
    src: url(${zo}) format('woff2'), url(${Wo}) format("woff");
  }

  *,
  *::before,
  *::after {
    -webkit-box-sizing: border-box;
            box-sizing: border-box;
  }

  html,
  body {
    margin: 0;
    padding: 0;
    min-width: 900px;
    height: 100%;
    font-size: 16px;
  }

  #root, .app {
    min-height: 100vh;
    min-width: 900px;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
  }

  main {
    overflow: hidden;
    -ms-flex-negative: 1;
        flex-shrink: 1;
  }

  .main-entrance {
    max-height: 100%;
  }

  header, footer {
    -ms-flex-negative: 0;
        flex-shrink: 0;
  }

  footer {
    margin-top: auto;
  }

  body {
    font-family: 'Inter', Arial, sans-serif;
    font-style: normal;
    font-weight: 400;
    font-size: ${({theme:t})=>t.font.semibase};
    line-height: 130%;
    color: ${({theme:t})=>t.color.white};
    font-feature-settings: 'pnum' on, 'lnum' on;

    background-color: ${({theme:t})=>t.color.bg};

    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-synthesis: none;
  }

  a {
    color: ${({theme:t})=>t.color.black};
    text-decoration: none;
  }

  img,
  video {
    display: block;
    max-width: 100%;
    height: auto;
  }

  textarea {
    resize: none;
  }

  /* chrome autofill background removal */
  input:-webkit-autofill {
    box-shadow: inset 0 0 0 1000px transparent;
    -webkit-box-shadow: 0 0 0px 1000px transparent inset;
    -webkit-text-fill-color: ${({theme:t})=>t.color.grayFormText};
  }

  /* firefox placeholder \ invalid fix + ios bdrs */
  input {
    border-radius: 0;
  }

  input::placeholder {
    opacity: 1;
  }

  input:invalid {
    box-shadow: none;
  }

  /* chrome search X removal */
  input[type=search]::-webkit-search-decoration,
  input[type=search]::-webkit-search-cancel-button,
  input[type=search]::-webkit-search-results-button,
  input[type=search]::-webkit-search-results-decoration {
    -webkit-appearance: none;
            appearance: none;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    margin: 0;
    -webkit-appearance: none;
            appearance: none;
  }

  input[type=number] {
    -webkit-appearance: textfield;
       -moz-appearance: textfield;
            appearance: textfield;
  }

  /* ios button \ inputs reset */
  select,
  textarea,
  input:matches([type=email],
  [type=number],
  [type=password],
  [type=search],
  [type=tel],
  [type=text],
  [type=url]) {
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
  }

  button,
  [type=button],
  [type=reset],
  [type=submit] {
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    white-space: nowrap;
    border: 0;
    clip: rect(0 0 0 0);
    -webkit-clip-path: inset(100%);
            clip-path: inset(100%);
  }

  .scroll-lock-ios {
    position: fixed;
    overflow: hidden;
  }

  .scroll-lock {
    overflow: hidden;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-transition {
    -webkit-transition: none !important;
    -o-transition: none !important;
    transition: none !important;
  }

  .js-focus-visible :focus:not(.focus-visible) {
    outline: none;
  }

  .no-bm {
    margin-bottom: 0;
  }

  .container, .MuiTableContainer-root {
    scrollbar-width: thin;
    scrollbar-width: 8px;
    scrollbar-color: ${({theme:t})=>t.color.chambray} ${({theme:t})=>t.color.lightSeaGreen};

    &::-webkit-scrollbar {
      width: 8px;
    }

    &::-webkit-scrollbar-track {
      background: ${({theme:t})=>t.color.nepal};
    }

    &::-webkit-scrollbar-thumb {
      width: 8px;
      background-color: ${({theme:t})=>t.color.chambray};
    }
  }
`;function Bo({basename:t,children:o,history:n}){const[r,a]=m.useState({action:n.action,location:n.location});return m.useLayoutEffect(()=>n.listen(a),[n]),e.jsx(Bt,{basename:t,location:r.location,navigationType:r.action,navigator:n,children:o})}const gt=no();function ft(){const t={display:"block",margin:"10% auto",borderColor:"#17c1bc",borderWidth:"5px"};return e.jsx("main",{className:"page__main page__main--index",children:e.jsx("div",{className:"container",children:e.jsx(Pt,{size:120,"aria-label":"Loading Spinner","data-testid":"loader",cssOverride:t})})})}const j=Ut;H.extend(ao);H.extend(ro);H.extend(io);const Po=["January","February","March","April","May","June","July","August","September","October","November","December"],Me=t=>{const o=new Map;return t&&t.map(n=>{o.set(n._id,n)}),o};class le{static get(){return localStorage.getItem(this._name)??""}static save(o){localStorage.setItem(this._name,o)}static drop(){localStorage.removeItem(this._name)}}ue(le,"_name","vote-auth-token");const Uo=t=>H(t).format("DD.MM.YYYY"),Le=t=>{if(!t)return;const[o,n]=t.split(":").map(Number),r=new Date;return r.setHours(o),r.setMinutes(n),r.setSeconds(0),r.toISOString()},Qo=t=>{if(t!=null)return H(t).format()},bt=()=>{const t=new Date;return`${t.getDate()>=10?t.getDate():`0${t.getDate()}`}.${t.getMonth()+1>=10?t.getMonth()+1:`0${t.getMonth()+1}`}.${t.getFullYear()}`},Te=t=>{const o=new Date(t),n=o.getHours(),r=o.getMinutes();return`${n<10?`0${n}`:n}:${r===0?`0${r}`:r}`},Yo=t=>t<10?`0${t}`:t,Ke=t=>{const o=new Date(t),n=o.getHours(),r=o.getMinutes(),a=o.getSeconds();return`${n<10?`0${n}`:n}:${r===0?`0${r}`:r}:${Yo(a)}`},yt=t=>{const o=new Date(t).getDate()<10?`0${new Date(t).getDate()}`:new Date(t).getDate(),n=new Date(t).getMonth()+1,r=n<10?`0${n}`:n;return`${o}:${r}`},Zo=t=>new Date(t).getMonth(),Go=()=>{const t=new Date;return t.setHours(0,0,0,0),H(t).utc().local().format()};class Ko{constructor(o,n,r){ue(this,"_data",null);ue(this,"_tableName");ue(this,"_date");this._data=o,this._tableName=n,this._date=r,this._writeToFileHandler=this._writeToFileHandler.bind(this)}init(){this._date&&this._writeToFileHandler()}async _writeToFileHandler(){await this._writeToFileHundler()}async _writeToFileHundler(){var i;const o=new so.Workbook,n=o.addWorksheet(`${this._tableName}`,{properties:{tabColor:{argb:"FFC0000"}}});if(o.calcProperties.fullCalcOnLoad=!0,(i=this._data)!=null&&i.length){const c=await en(this._data),u=c&&Object.keys(c[0]);u.forEach((d,s)=>{n.getColumn(s+1).width=14}),n.addRow(u).eachCell(d=>{d.alignment={vertical:"middle",horizontal:"center"},d.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},d.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFCCCCCC"}}}),c&&c.forEach(d=>{n.addRow(Object.values(d)).eachCell((h,w)=>{h.alignment={vertical:"middle",horizontal:"center"},h.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},w===1&&(h.numFmt="yyyy-mm-dd"),(w===11||w===12)&&(h.numFmt="hh-mm-ss")})})}else return;const r=await o.xlsx.writeBuffer(),a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",l=new Blob([r],{type:a});lo.saveAs(l,`${this._date&&Po[Zo(this._date)]}.xlsx`)}}const Xo=(t,o,n,r,a,l,i,c,u,x,d,s,h,w)=>({_id:t,createdAt:o,employeeId:n,employee:r,timeFrom:a,timeTo:l,totalHours:i,detailId:c,detail:u,typeOfJob:x,extra:h,quantity:d,comment:w,master:s}),Xe=t=>t.map(n=>Xo(n._id,n.createdAt,n.employeeId,n.employee,n.timeFrom,n.timeTo,n.totalHours,n.detailId,n.detail,n.typeOfJob,n.quantity,n.master,n.extra,n.comment)),en=async t=>t.map(n=>{var r,a,l,i;return{Date:new Date(n.createdAt).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit"}),"№":n.employee.registrationNumber,"Type Of Job&Detail":`${n.typeOfJob}${((r=n.detail)==null?void 0:r.shortName)!=="0"?(a=n.detail)==null?void 0:a.shortName:""}`,Quantity:n.quantity!==0?Number(n.quantity):"",TotalHours:n.totalHours||"",Extra:n.extra||"",Comment:n.comment||"","Type Of Job":n.typeOfJob,Employee:n.employee.familyName,Detail:((l=n.detail)==null?void 0:l.shortName)!=="0"?(i=n.detail)==null?void 0:i.shortName:"",TimeFrom:n.timeFrom!=="-"?Ke(n.timeFrom):"",TimeTo:n.timeTo!=="-"?Ke(n.timeTo):"",Master:n.master.name}}),tn="/",on=5e3,et=200,De=["Instruments","Safety","Arrival"],nn=["Vololodya","Alsfeld","Amberg","Vitalick","Slava","Zhenya"],v={createdAt:Go(),limit:et,offset:0,lengthJobs:et},xe={createdAt:"",limit:10,page:1,typeProduct:"",type:""};var G=(t=>(t.Shipment="Shipment",t.Arrival="Arrival",t.initial="",t))(G||{}),E=(t=>(t.Auth="AUTH",t.NoAuth="NO_AUTH",t.Unknown="UNKNOWN",t))(E||{}),ge=(t=>(t.Still="",t.Pending="Отправляется",t.Fullfilled="Успешно отправлено",t.Rejected="Запрос прерван",t))(ge||{}),K=(t=>(t.Admin="admin",t.Regular="regular",t.Storage="storage",t))(K||{});const an=["f","kd","nn","u","k","kbd","fa","s"],rn=["b","kon","n","rep","sta","ubo","wtr","doo","k","ll","ls","ner","vom","adm","baum","pac","sob"],X=new Set;an.map(t=>{X.add(t)});const pe=new Set;rn.map(t=>{pe.add(t)});const sn={b:{name:"b",longName:"brigadieren"},f:{name:"f",longName:"feiertag"},kd:{name:"kd",longName:"kranken Den"},kon:{name:"kon",longName:"kontrolle"},ma:{name:"ma",longName:"arbeit minuten"},md:{name:"md",longName:"dop minuti (ot klienta)"},mk:{name:"mk",longName:"kontroll minuten"},mn:{name:"mn",longName:"dop minuti (ot nas)"},ms:{name:"ms",longName:"strahl minuten"},mz:{name:"mz",longName:"big strahlen arbeit"},n:{name:"n",longName:"net raboti (oplachivajem rabotnjiku)"},nn:{name:"nn",longName:"ne rabotal (ne oplat, vihodnoi)"},rep:{name:"rep",longName:"remont el.oborudovania"},sta:{name:"sta",longName:"stapler"},ubo:{name:"ubo",longName:"uborka ceha"},wtr:{name:"wtr",longName:"wtralj"},doo:{name:"doo",longName:"dorabotka oshibok"},u:{name:"u",longName:"urlaub"},k:{name:"k",longName:"kranken"},kbd:{name:"kbd",longName:"kranken bezBolnicnogo den"},ll:{name:"ll",longName:"lernen (lehrer)"},ls:{name:"ls",longName:"lernen (skolnieks)"},ml:{name:"ml",longName:"lehrer skolnieks minut"},ner:{name:"ner",longName:"neizvestnaja rabota"},vom:{name:"vom",longName:"vodjitelj mashini"},adm:{name:"adm",longName:"administrieren"},baum:{name:"baum",longName:"stroika ceha"},fa:{name:"fa",longName:"fail"},pac:{name:"pac",longName:"packung"},s:{name:"s",longName:"storungen"},sob:{name:"sob",longName:"sobranie"}},ln=[{name:"b",longName:"brigadieren"},{name:"f",longName:"feiertag"},{name:"kd",longName:"kranken Den"},{name:"kon",longName:"kontrolle"},{name:"ma",longName:"arbeit minuten"},{name:"md",longName:"dop minuti (ot klienta)"},{name:"mk",longName:"kontroll minuten"},{name:"mn",longName:"dop minuti (ot nas)"},{name:"ms",longName:"strahl minuten"},{name:"mz",longName:"big strahlen arbeit"},{name:"n",longName:"net raboti (oplachivajem rabotnjiku)"},{name:"nn",longName:"ne rabotal (ne oplat, vihodnoi)"},{name:"rep",longName:"remont el.oborudovania"},{name:"sta",longName:"stapler"},{name:"ubo",longName:"uborka ceha"},{name:"wtr",longName:"wtralj"},{name:"doo",longName:"dorabotka oshibok"},{name:"u",longName:"urlaub"},{name:"k",longName:"kranken"},{name:"kbd",longName:"kranken bezBolnicnogo den"},{name:"ll",longName:"lernen (lehrer)"},{name:"ls",longName:"lernen (skolnieks)"},{name:"ml",longName:"lehrer skolnieks minut"},{name:"ner",longName:"neizvestnaja rabota"},{name:"vom",longName:"vodjitelj mashini"},{name:"adm",longName:"administrieren"},{name:"baum",longName:"stroika ceha"},{name:"fa",longName:"fail"},{name:"pac",longName:"packung"},{name:"s",longName:"storungen"},{name:"sob",longName:"sobranie"}],P=C("user/fetchUserStatus",async(t,{extra:o})=>{const{api:n,browserHistory:r}=o;try{const{data:a}=await n.get("api/users");return a}catch(a){return le.drop(),r.push("/entrance"),Promise.reject(a)}}),he=C("user/loginUser",async({email:t,password:o},{extra:n})=>{const{api:r}=n,{data:a,status:l}=await r.post("api/users/login",{email:t,password:o});return l===200&&a.token&&le.save(a.token),a}),jt=C("user/logoutUser",async(t,{extra:o})=>{await o.api.delete("api/users/logout"),le.drop()});C("user/registerUser",async({email:t,password:o,type:n},{dispatch:r,extra:a})=>{const{api:l,browserHistory:i}=a,{status:c}=await l.post("api/users/register",{email:t,password:o,type:n});c===201&&((await r(he({email:t,password:o}))).type===he.fulfilled.type&&await r(P()),i.push("/"))});const cn=C("user/postAvatar",async(t,{extra:o})=>{const n=new FormData;n.append("avatar",t);const{api:r,browserHistory:a}=o;await r.post("api/users/avatar",n,{headers:{"Content-Type":"multipart/form-data"}}),a.push("/")}),dn=C("app/fetchJobsByMonth",async(t,{extra:o})=>{const{createdAt:n,filterByMonth:r,limit:a=300}=t,{api:l}=o,{data:i}=await l.get("api/jobs/",{params:{createdAt:n,limit:a,filterByMonth:r}});return i}),ee=C("app/fetchJobs",async(t,{extra:o})=>{const{api:n}=o,{data:r}=await n.get("api/jobs/",{params:{createdAt:t.createdAt,limit:t.limit,offset:t.offset}});return r}),je=C("app/deleteJob",async(t,{extra:o,dispatch:n})=>{const{api:r,browserHistory:a}=o;try{await n(P());const{data:l}=await r.delete(`api/jobs/${t}`);return a.push("/"),l}catch(l){return a.push("/entrance"),Promise.reject(l)}}),Ce=C("app/editJob",async(t,{extra:o,dispatch:n})=>{const{api:r,browserHistory:a}=o;try{await n(P());const{data:l}=await r.put(`api/jobs/${t._id}`,t);return l}catch(l){return a.push("/entrance"),Promise.reject(l)}}),Ct=C("app/postJob",async(t,{extra:o,dispatch:n})=>{const{api:r,browserHistory:a}=o;try{await n(P());const{data:l}=await r.post("api/jobs",t);return l}catch(l){return a.push("/entrance"),Promise.reject(l)}}),te=C("app/fetchEmployees",async(t,{extra:o})=>{const{api:n}=o,{data:r}=await n.get("api/employees");return r}),mn=C("app/editEmployee",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.put(`api/employees/${t._id}`,t);return await n(te()),a}),wt=C("app/postEmployee",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.post("api/employees",t);return await n(te()),a}),St=C("app/deleteEmployee",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.delete(`api/employees/${t}`);return await n(te()),a}),re=C("app/fetchDetails",async(t,{extra:o})=>{const{api:n}=o,{data:r}=await n.get("api/details");return r}),un=C("app/postDetail",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.post("api/details",t);return await n(re()),a}),pn=C("app/editDetail",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.put(`api/details/${t.detailId}`,t);return await n(re()),a}),q=C("app/fetchStoreHouse",async(t,{extra:o})=>{const{api:n}=o,{data:r}=await n.get("api/storehouse");return r}),we=C("app/postStoreHouse",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.post("api/storehouse",t);return await n(q()),a}),Se=C("app/editStoreHouse",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.put(`api/storehouse/${t.productId}`,t);return await n(q()),await n(oe({})),a}),ke=C("app/deleteStoreHouse",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.delete(`api/storehouse/${t}`);return await n(q()),a}),oe=C("app/fetchStoreHouseOperation",async(t,{extra:o})=>{const{api:n}=o,{data:r}=await n.get("api/storeoperation",{params:{limit:t.limit,page:t.page,type:t.type,typeProduct:t.typeProduct,createdAt:t.createdAt}});return r}),Ne=C("app/postStoreHouseOperation",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.post("api/storeoperation",t);return await n(oe(xe)),await n(q()),a}),cr=C("app/deleteStoreHouseOperation",async(t,{extra:o,dispatch:n})=>{const{api:r}=o,{data:a}=await r.delete(`api/storeoperation/${t}`);return await n(oe(xe)),await n(q()),a}),hn={authorizationStatus:E.NoAuth,user:null},xn=ve({name:"USER",initialState:hn,reducers:{},extraReducers(t){t.addCase(P.rejected,o=>{o.authorizationStatus=E.NoAuth,o.user=null}).addCase(P.fulfilled,(o,n)=>{o.authorizationStatus=E.Auth,o.user=n.payload}).addCase(he.rejected,o=>{o.authorizationStatus=E.NoAuth,o.user=null}).addCase(he.fulfilled,(o,n)=>{o.authorizationStatus=E.Auth,o.user=n.payload}).addCase(jt.fulfilled,o=>{o.authorizationStatus=E.NoAuth,o.user=null})}}),gn=t=>t,qe=S(gn,t=>t.USER),fn=S(qe,t=>t.authorizationStatus),de=S(qe,t=>t.user),fe=S(de,t=>t==null?void 0:t.type);S(qe,t=>t.authorizationStatus===E.Auth);const kt=m.createContext(E.NoAuth);function bn({children:t}){const o=j(fn);return e.jsx(kt.Provider,{value:o,children:t})}const yn={isLoading:!1,jobs:[],newJobs:[],employees:[],details:[],isJobSendingStatus:ge.Still,sortDate:""},Nt=ve({name:"JOB",initialState:yn,reducers:{setSortDate:(t,o)=>{t.sortDate=o.payload,t.newJobs=[]},resetJobSendingStatus:t=>{t.isJobSendingStatus=ge.Still}},extraReducers(t){t.addCase(ee.pending,o=>{o.isLoading=!0}).addCase(ee.rejected,o=>{o.isLoading=!1}).addCase(ee.fulfilled,(o,n)=>{o.isLoading=!1;const r=new Set(o.newJobs.map(a=>a._id));o.jobs=n.payload.filter(a=>!r.has(a._id)),o.newJobs=o.newJobs.concat(o.jobs)}).addCase(Ct.fulfilled,o=>{o.newJobs=[]}).addCase(Ce.rejected,o=>{o.isLoading=!1}).addCase(Ce.pending,o=>{o.isLoading=!0}).addCase(Ce.fulfilled,o=>{o.newJobs=[]}).addCase(je.rejected,o=>{o.isLoading=!1}).addCase(je.pending,o=>{o.isLoading=!0}).addCase(je.fulfilled,o=>{o.newJobs=[],o.isLoading=!1}).addCase(te.pending,o=>{o.isLoading=!0}).addCase(te.rejected,o=>{o.isLoading=!1}).addCase(te.fulfilled,(o,n)=>{o.employees=n.payload,o.isLoading=!1}).addCase(St.fulfilled,()=>{}).addCase(wt.fulfilled,o=>{o.isLoading=!1}).addCase(re.pending,o=>{o.isLoading=!0}).addCase(re.rejected,o=>{o.isLoading=!1}).addCase(re.fulfilled,(o,n)=>{o.details=n.payload,o.isLoading=!1})}}),{resetJobSendingStatus:dr,setSortDate:Oe}=Nt.actions,jn=t=>t,Z=S(jn,t=>t.JOB);S(Z,t=>t.isJobSendingStatus);const Cn=S(Z,t=>t.isLoading);S(Z,t=>t.sortDate);const wn=S(Z,t=>t.details),Fe=S(Z,t=>t.employees);S(Z,t=>t.jobs);const Ot=S(Z,t=>t.newJobs),Sn=S(Z,t=>t.newJobs.length),Lt=S([Ot],t=>t.length>0?t[0].count:0),O=()=>Qt(),kn={query:v,onChangeDate:void 0,onChangeOffset:void 0,setQuery:void 0},Tt=m.createContext(kn);function Nn({children:t}){const o=j(Sn),n=m.useMemo(()=>o,[o]),r=j(Lt),a=O(),[l,i]=m.useState({...v}),c=m.useMemo(()=>l,[l]),u=m.useCallback(s=>{a(Oe("")),i(h=>({...h,createdAt:Qo(s)}))},[a]),x=m.useCallback(()=>{r&&o<r?i(s=>({...s,offset:s.offset+Number(v.limit)})):o==r?(a(Oe("")),i({...v,createdAt:l.createdAt})):(a(Oe("")),i({...v,createdAt:l.createdAt}))},[a,l.createdAt,r,o]),d={query:{...c,lengthJobs:n},onChangeDate:u,onChangeOffset:x,setQuery:i};return e.jsx(Tt.Provider,{value:d,children:t})}const On=N.main`
  position: relative;
  display: flex;
  flex-direction: column;
  max-width: initial;
`,Ln=t=>m.createElement("svg",{width:26,height:22,viewBox:"0 0 26 22",fill:"CurrentColor",...t},m.createElement("path",{d:"M3.15973 11.4598C2.84746 11.157 2.84746 10.6559 3.15973 10.353L12.9352 0.872609C13.4241 0.398417 14.2428 0.744885 14.2428 1.42601V6.74203H17.1162C17.542 6.74203 17.8871 7.08717 17.8871 7.51293V14.5887C17.8871 15.0144 17.542 15.3596 17.1162 15.3596H14.2428V20.3869C14.2428 21.068 13.4241 21.4145 12.9352 20.9403L3.15973 11.4598Z"}),m.createElement("path",{d:"M15.0589 0.734148H21.0398C23.3167 0.734148 25.1626 2.5146 25.1626 4.71089V17.1019C25.1626 19.2982 23.3167 21.0787 21.0398 21.0787H15.0589V19.0903H21.0398C22.1783 19.0903 23.1012 18.2001 23.1012 17.1019V4.71089C23.1012 3.61274 22.1783 2.72252 21.0398 2.72252H15.0589V0.734148Z"}),m.createElement("path",{d:"M4.30663 6.97903L0.872081 10.3099C0.535478 10.6364 0.535478 11.1765 0.872081 11.5029L4.4752 14.9973H5.94547L2.34235 11.5029C2.00574 11.1765 2.00574 10.6364 2.34235 10.3099L5.7769 6.97903H4.30663Z"})),Tn=N.header`
  background-color: ${({theme:t,color:o})=>o||t.color.curiousBlue};
`,An=N.div`
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;

  @media (max-width: 1023px) {
    max-width: 100%;
    padding: 0 10px;
  }
`,In=N.p`
  position: absolute;
  left: 50%;
  top: calc(50% - 10px);
  transform: translate(-50%);
  flex-shrink: 0;
  margin: 0;
  font-size: 18px;
  text-transform: uppercase;
  color: ${({theme:t,color:o})=>o||t.color.white};

  @media (max-width: 850px) {

  }
`,Dn=N(Ln)`
  display: flex;
  width: 40px;
  height: 35px;
  color: ${({theme:t})=>t.color.nepal};
`,Fn=N.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,$n=N.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,En=N.div`
  position: relative;
  border-radius: 50%;
  height: 40px;
  width: 40px;
  overflow: hidden;
  margin-right: 5px;

  & img {
    position: absolute;
    display: flex;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
`,Hn=N.p.attrs({className:"user-name"})`
  margin: 0;
  font-weight: 700;
`,_n=N.div(t=>({width:"100%",maxWidth:"1400px",margin:"0 auto",maxHeight:t.$mh,marginTop:t.$mt,padding:t.$padding,marginBottom:t.$mb,overflowY:t.$overflow,"@media (max-width: 1023px)":{padding:t.$paddingTablet}})),ie=({children:t,...o})=>e.jsx(_n,{...o,children:t}),vn=ce(Re)(({...t})=>({color:"white",padding:"15px",backgroundColor:"#17c1bc","&:hover":{backgroundColor:"#128682"},fontFamily:"Inter",fontWeight:"700",top:t.top,m:0,minWidth:80})),k=({text:t,sx:o=[],children:n,onClick:r,disabled:a,data:l})=>e.jsxs(Re,{"data-set":l,disabled:a,onClick:r,type:"button",sx:[{minWidth:80,m:0,backgroundColor:"#17c1bc",color:"white",fontWeight:"bold",fontFamily:"Inter",borderRadius:0,"&:hover":{backgroundColor:"#247cc1"}},...Array.isArray(o)?o:[o]],children:[t,n]}),B=({text:t,sx:o=[],disabled:n})=>{const{isSubmitting:r}=_();return e.jsx(Re,{type:"submit",className:"secondary",disabled:r||n,sx:[{px:4,py:1.95,m:0,top:"-1px",backgroundColor:"#17c1bc",color:"white",fontWeight:"bold",borderRadius:0,ts:5,"&:hover":{backgroundColor:"#128682"}},...Array.isArray(o)?o:[o]],children:t})};function Rn(){const{pathname:t}=Ie(),o=_e(),n=m.useRef(null),r=O(),a=j(de),l=u=>{var x;u.preventDefault(),console.log("input"),(x=n.current)==null||x.click()},i=async u=>{var d;const x=(d=u.target.files)==null?void 0:d[0];x&&(await r(cn(x))).meta.requestStatus==="fulfilled"&&await r(P())},c=async()=>{await r(jt()),o("/entrance")};return e.jsx(Tn,{color:(a==null?void 0:a.type)!==K.Storage&&t!=="/storage"?"":"#574f69",children:e.jsx(ie,{children:e.jsxs(An,{children:[e.jsxs("p",{children:["Today: ",bt()]}),e.jsx(In,{color:(a==null?void 0:a.type)!==K.Storage&&t!=="/storage"?"":"#e4ba48",children:(a==null?void 0:a.type)!==K.Storage&&t!=="/storage"?"Working time of employes":"work with storage"}),e.jsxs(Fn,{children:[e.jsx(k,{onClick:c,sx:{backgroundColor:"transparent","&:hover":{opacity:"0.5",backgroundColor:"transparent"}},children:e.jsx(Dn,{})}),e.jsxs($n,{children:[e.jsxs("form",{children:[e.jsx(En,{children:e.jsx(rt,{to:"",onClick:l,children:e.jsx("img",{src:a==null?void 0:a.avatar,alt:"avatar",width:"42px",height:"42px"})})}),e.jsx("input",{onChange:i,ref:n,type:"file",id:"avatar",name:"avatar",className:"visually-hidden",style:{position:"absolute",height:"42px",width:"42px",background:"red"}})]}),e.jsx(Hn,{children:a==null?void 0:a.email})]})]})]})})})}const Mn=N.footer`
  display: flex;
  flex-direction: column;
`,qn=N.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  align-content: center;
  position: relative;
  padding: 5px 10px;
  text-align: center;
  background-color: ${({theme:t})=>t.color.mulledWine};

  &::before {
    position: absolute;
    display: block;
    left: 0;
    top: -10px;
    content: "";
    width: 100%;
    height: 10px;
    background-color: ${({theme:t})=>t.color.nepal};
  }
`,Jn=N.p`
  margin: 0;
`,Wn={isLoading:!1,positions:[],storehouseOperatons:[],totalItems:0,isJobSendingStatus:ge.Still},At=ve({name:"STOREHOUSE",initialState:Wn,reducers:{resetJobSendingStatus:t=>{t.isJobSendingStatus=ge.Still}},extraReducers(t){t.addCase(q.pending,o=>{o.isLoading=!0}).addCase(q.rejected,o=>{o.isLoading=!1}).addCase(q.fulfilled,(o,n)=>{o.isLoading=!1,o.positions=n.payload}).addCase(we.pending,o=>{o.isLoading=!0}).addCase(we.rejected,o=>{o.isLoading=!1}).addCase(we.fulfilled,o=>{o.isLoading=!1}).addCase(Se.pending,o=>{o.isLoading=!0}).addCase(Se.rejected,o=>{o.isLoading=!1}).addCase(Se.fulfilled,o=>{o.isLoading=!1}).addCase(ke.pending,o=>{o.isLoading=!0}).addCase(ke.rejected,o=>{o.isLoading=!1}).addCase(ke.fulfilled,o=>{o.isLoading=!1}).addCase(oe.pending,o=>{o.isLoading=!0}).addCase(oe.rejected,o=>{o.isLoading=!1}).addCase(oe.fulfilled,(o,n)=>{o.isLoading=!1,o.totalItems=n.payload.totalItems,o.storehouseOperatons=n.payload.items}).addCase(Ne.pending,o=>{o.isLoading=!0}).addCase(Ne.rejected,o=>{o.isLoading=!1}).addCase(Ne.fulfilled,o=>{o.isLoading=!1})}});At.actions;const zn=t=>t,me=S(zn,t=>t.STOREHOUSE);S(me,t=>t.isJobSendingStatus);const mr=S(me,t=>t.isLoading),Je=S(me,t=>t.positions);S(me,t=>t.positions.length);const ur=S(me,t=>t.storehouseOperatons),pr=S(me,t=>t.totalItems);function It({sx:t,onChange:o,storeHouse:n}){const[r,a]=m.useState(null),l=m.useMemo(()=>n,[n]);return m.useEffect(()=>{a(null)},[l]),e.jsx(R,{value:r,autoComplete:!1,id:"select-storehouse",sx:[{display:"inline-flex",maxHeight:"100px",minWidth:"250px"},...Array.isArray(t)?t:[t]],options:l,fullWidth:!0,getOptionLabel:i=>`${i.name} ${i.diameter?i.diameter:i.size}`,isOptionEqualToValue:(i,c)=>i._id===c._id,onChange:(i,c)=>{c===null?(o([]),a(null)):(o([c.name,c._id,c.currentQuantity.toString()]),a(c))},renderInput:i=>e.jsx(M,{...i,fullWidth:!0,name:"prod",placeholder:"StoreHouse"})})}function Vn(){const[t,o]=m.useState([]),n=j(Je),{pathname:r}=Ie();return m.useEffect(()=>{o([])},[n]),r==="/storage"?e.jsxs(ne,{sx:{textAlign:"right",position:"relative",right:"50px",minWidth:"310px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("p",{style:{margin:"0",marginLeft:"auto",marginRight:"25px"},children:t.length===0?e.jsxs(e.Fragment,{children:["check",e.jsx("br",{}),"availability"]}):t[2]}),e.jsx(It,{sx:{maxWidth:"120px",minWidth:"190px"},onChange:o,storeHouse:n})]}):null}function Bn(){const{pathname:t}=Ie(),o=j(de);return e.jsx(Mn,{children:e.jsxs(qn,{children:[(o==null?void 0:o.type)===K.Admin?e.jsx(rt,{to:t!=="/storage"?"/storage":"/",children:e.jsx(k,{sx:{position:"relative",left:0,display:"flex",fontSize:"12px",color:"white",backgroundColor:`${t!=="/storage"?"#247cc1":"#e4ba48"}`,borderRadius:1.5,boxShadow:"none",py:1.7,px:5,mx:7,width:"fit-content","&:hover":{backgroundColor:"#7690a0"}},children:t!=="/storage"?"Storage":"To main"})}):null,e.jsxs(Jn,{style:{marginLeft:t!=="/storage"?"calc(50% - 340px)":"auto",marginRight:"auto"},children:["Made For Voitto. ",new Date().getFullYear()]}),e.jsx(Vn,{})]})})}function Pn({children:t}){return e.jsxs(e.Fragment,{children:[e.jsx(Rn,{}),t,e.jsx(Bn,{})]})}function Ae({name:t}){const{setFieldValue:o,values:n,errors:r,touched:a,handleChange:l}=_(),i=r[`${t}`],c=n[`${t}`],u=Array.from(new Array(24*2)).map((d,s)=>`${s<20?"0":""}${Math.floor(s/2)}:${s%2===0?"00":"30"}`),x=(d,s)=>{if(o(t,s),t==="timeTo"&&n.timeFrom&&s){const h=Number(n.timeFrom.replace(":","")),w=Number(s.replace(":",""));h>=w&&(o("timeTo",""),y.warn("Time To must be more then Time From"))}else if(t==="timeFrom"&&n.timeTo&&s){const h=Number(n.timeTo.replace(":",""));Number(s.replace(":",""))>=h&&(o("timeFrom",""),y.warn("Time To must be more then Time From"))}l(`${t}`)};return e.jsx(R,{disabled:X.has(n.typeOfJob),value:n[`${t}`]===""?null:n[`${t}`],id:t,isOptionEqualToValue:(d,s)=>s==="-"?!0:d===s,sx:{minWidth:160,maxWidth:160,display:"inline-flex"},"data-name":t,options:[...u.slice(12,48),"24:00"],onChange:x,renderInput:d=>e.jsx(M,{error:!c&&a[`${t}`],helperText:!c&&a[`${t}`]?i:null,...d,placeholder:t,name:t})})}function We({sx:t,onChangeSelect:o}){const n=j(Fe),r=Me(n),{setValues:a,values:l,errors:i,touched:c,handleChange:u}=_(),x=i.employeeId,d=l.employeeId;return e.jsx(e.Fragment,{children:e.jsx(R,{value:l.employeeId?r.get(l.employeeId):null,id:"select-employee",sx:[{maxWidth:180,display:"inline-flex"},...Array.isArray(t)?t:[t]],options:n,fullWidth:!0,getOptionLabel:s=>s.familyName,onChange:(s,h)=>{h&&o&&o(h),h===null&&a({...l,typeOfJob:"",familyName:"",registrationNumber:void 0,employeeId:"",timeFrom:"",timeTo:"",detailId:""}),h&&pe.has(h.mainJob)?a({...l,typeOfJob:h.mainJob,familyName:h.familyName,registrationNumber:h.registrationNumber,employeeId:`${h._id&&h._id.toString()}`,quantity:0,detailId:"66e3fa22873f13f61db28d36"}):h&&a({...l,typeOfJob:h.mainJob,familyName:h.familyName,registrationNumber:h.registrationNumber,employeeId:`${h._id&&h._id.toString()}`}),u("employeeId")},renderInput:s=>e.jsx(M,{error:!d&&c.employeeId,helperText:!d&&c.employeeId?x:null,...s,name:"employeeId",placeholder:"Employee"})})})}function ze({sx:t}){const o=j(wn),n=Me(o),{setFieldValue:r,setValues:a,values:l,errors:i,touched:c,handleChange:u}=_(),x=i.detailId,d=l.detailId;return e.jsx(R,{disabled:X.has(l.typeOfJob),value:l.detailId?n.get(l.detailId):null,autoComplete:!1,id:"select-detail",sx:[{maxWidth:185,display:"inline-flex"},...Array.isArray(t)?t:[t]],options:o,fullWidth:!0,getOptionDisabled:s=>o.slice(-1).includes(s),getOptionLabel:s=>`${s.shortName} / ${s.longName}`,onChange:(s,h)=>{h===null&&(a({...l,shortName:"",longName:"",normOfMinute:void 0,customer:""}),r("detailId",""),u("detailId")),h&&(a({...l,shortName:h.shortName,longName:h.longName,normOfMinute:h.normOfMinute,customer:h.customer}),r("detailId",h._id),u("detailId"))},renderInput:s=>e.jsx(M,{...s,error:!d&&c.detailId,helperText:!d&&c.detailId?x:null,name:"detailId",placeholder:"Detail"})})}function $e({name:t,sx:o=[]}){const{setFieldValue:n,values:r,errors:a,touched:l,handleChange:i,setValues:c}=_(),u=a.typeOfJob,x=r.typeOfJob;return e.jsx(R,{value:r.typeOfJob?sn[r.typeOfJob]:null,id:t,sx:[{minWidth:150,width:"100%",maxWidth:200,display:"inline-flex"},...Array.isArray(o)?o:[o]],options:ln,autoComplete:!1,fullWidth:!0,getOptionLabel:d=>`${d.name} / ${d.longName}`,isOptionEqualToValue:(d,s)=>d.name===s.name&&d.longName===s.longName,onChange:(d,s)=>{s&&(X.has(s.name)?c({...r,quantity:0,timeFrom:"-",timeTo:"-",detailId:"66e3fa22873f13f61db28d36"}):pe.has(s.name)&&c({...r,quantity:0,detailId:"66e3fa22873f13f61db28d36"}),n(`${t}`,s.name),i(`${t}`)),s===null&&c({...r,typeOfJob:"",detailId:"",quantity:void 0})},renderInput:d=>e.jsx(M,{error:!x&&l.typeOfJob,helperText:!x&&l.typeOfJob?u:null,...d,name:t,placeholder:`${r.typeOfJob?r.typeOfJob:"Type Of Job"}`})})}function Dt(){const[t,o]=m.useState(Boolean),{setFieldValue:n,values:r,isSubmitting:a}=_(),l=i=>{o(i.target.checked)};return m.useEffect(()=>{a&&t&&o(!1)},[a,t]),e.jsxs(ne,{sx:{display:"flex",flexDirection:"row",alignItems:"flex-start",marginBottom:"auto",position:"relative",zIndex:3},children:[e.jsx(ho,{control:e.jsx(xo,{checked:t,onChange:l}),label:"Comment",sx:{color:"gray",textTransform:"capitalize",p:0}}),t&&e.jsx(st,{value:r.comment,variant:"outlined",id:"comment",name:"comment",minRows:4,sx:{position:"absolute",l:0,top:"150%"},maxRows:6,onChange:i=>n("comment",i.target.value)})]})}const tt={employeeId:"",timeFrom:"",timeTo:"",detailId:"",typeOfJob:"",extra:void 0,quantity:void 0,comment:"",master:""},Un=J().shape({employeeId:g().required("Fill field"),timeFrom:g().required("Fill field"),timeTo:g().required("Fill field"),detailId:g().required("Fill field"),typeOfJob:g().required("Fill field"),extra:L(),quantity:L().required("Fill field"),comment:g()});function Qn(){console.log("Form add job");const t=O(),o=j(de),n=a=>{if(a==null)return"Quantity must be"},r=(a,l)=>{o?a.master=o._id:a.master="",X.has(a.typeOfJob)?(a.timeFrom="-",a.timeTo="-"):(a.timeFrom=H(Le(`${a.timeFrom&&a.timeFrom}`)).format("YYYY-MM-DDTHH:mm:ssZ"),a.timeTo=H(Le(`${a.timeTo&&a.timeTo}`)).format("YYYY-MM-DDTHH:mm:ssZ")),t(Ct(a)).then(i=>{i.meta.requestStatus==="fulfilled"&&t(ee(v))}),y.success("Job added successfully",{position:"top-center",style:{background:"#17c1bc"}}),l.setSubmitting(!1),l.resetForm(tt)};return e.jsx(W,{initialValues:tt,validationSchema:Un,onSubmit:r,children:({values:a})=>e.jsx(z,{autoComplete:"off",children:e.jsxs($,{direction:"row",spacing:1,useFlexGap:!0,flexWrap:"wrap",alignItems:"center",children:[e.jsx(We,{}),e.jsx(Ae,{name:"timeFrom"}),e.jsx(Ae,{name:"timeTo"}),e.jsx(ze,{}),e.jsx($e,{name:"typeOfJob"}),e.jsx(f,{component:b,sx:{maxWidth:100},id:"extra",type:"number",name:"extra",placeholder:"Extra",value:a.extra===void 0?"":a.extra,disabled:X.has(a.typeOfJob)||pe.has(a.typeOfJob)}),e.jsx(f,{component:b,sx:{maxWidth:100},id:"quantity",name:"quantity",type:"number",placeholder:"Quantity",validate:n,value:a.quantity===void 0?"":a.quantity,disabled:X.has(a.typeOfJob)||pe.has(a.typeOfJob)}),e.jsx(Dt,{}),e.jsx(B,{sx:{marginRight:"auto"},text:"Write"})]})})})}const Ve=(t=!1)=>{const[o,n]=m.useState(t);return{visibility:o,show:m.useCallback(()=>n(!0),[]),hide:m.useCallback(()=>n(!1),[]),toggle:m.useCallback(()=>n(r=>!r),[])}},Yn=ce(t=>e.jsx(lt,{PaperProps:{style:{maxHeight:"220px",maxWidth:"150px",overflowY:"auto"}},id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},TransitionComponent:go,elevation:0,anchorOrigin:{vertical:0,horizontal:0},transformOrigin:{vertical:-40,horizontal:0},...t}))(({theme:t})=>({"& .MuiPaper-root":{borderRadius:3,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{zIndex:1,padding:"0"},"& .MuiMenuItem-root":{minWidth:"120px","&:active":{backgroundColor:ct(t.palette.primary.main,t.palette.action.selectedOpacity)}}}})),Zn=({jobs:t,fun:o})=>{const{visibility:n,toggle:r,hide:a}=Ve(),l=m.useRef(null),i=j(Fe),c=m.useCallback(x=>{const d=new Map;t&&t.map(h=>d.set(h.employee.familyName,h.employee.familyName));const s=x.currentTarget.textContent;if(!d.get(s)){o(null),r(),y.info(`${s} – not found in the list`,{position:"top-center",style:{background:"#e4ba48"}});return}o(s),r()},[o,r,t]),u=m.useCallback(()=>{o(null),r()},[o,r]);return e.jsxs(e.Fragment,{children:[e.jsx(I,{style:{opacity:"1",color:"#96c8cc"},sx:{m:0,zIndex:5},ref:l,onClick:r,id:"fade-button","varia-controls":n?"fade-menu":void 0,children:e.jsx(dt,{})}),e.jsxs(Yn,{open:n,onClose:a,anchorEl:l.current,sx:{zIndex:8,borderRadius:0},children:[e.jsx(se,{sx:{p:1,borderBottom:1,justifyContent:"center",borderBottomColor:"rgba(0, 0, 0, 0.1)",color:"#96b8cc",textTransform:"uppercase",fontSize:13},onClick:u,children:"reset"}),i&&i.map(x=>e.jsx(se,{sx:{p:1,borderBottom:1,borderBottomColor:"rgba(0, 0, 0, 0.1)",fontSize:14},onClick:c,children:x.familyName},x.familyName))]})]})};function ae(){return m.useContext(Tt)}const Gn=J().shape({employeeId:g().required("Required"),timeFrom:g().required("Required"),timeTo:g().required("Required"),detailId:g().required("Required"),typeOfJob:g().required("Required"),quantity:L().required("Required").typeError("Quantity must be a number"),comment:g()});function Kn(t){const{open:o,onClose:n,row:r}=t,{query:a}=ae(),l=O(),{employee:i,timeFrom:c,timeTo:u,master:x,...d}=r,s={...d,timeFrom:Te(c),timeTo:Te(u),master:x._id};delete s.totalHours,delete s.detail;const h=()=>{n()},w=D=>{D.timeFrom=H(Le(`${D.timeFrom&&D.timeFrom}`)).format("YYYY-MM-DDTHH:mm:ssZ"),D.timeTo=H(Le(`${D.timeTo&&D.timeTo}`)).format("YYYY-MM-DDTHH:mm:ssZ"),l(Ce(D)).then(Ee=>{Ee.meta.requestStatus==="fulfilled"&&l(ee(a))}),y.success(`Employee ${i.familyName} job successfully changed`,{style:{background:"#17c1bc"}}),setTimeout(()=>{h()},300)};return e.jsxs(fo,{onClose:n,open:o,anchor:"top",sx:{zIndex:10},children:[e.jsx($,{padding:1,children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:h,children:e.jsx(V,{})})}),e.jsx(ie,{children:e.jsxs("p",{style:{margin:"0 0 30px",color:"gray",textAlign:"center",textTransform:"uppercase",fontSize:"18px"},children:[e.jsx("span",{style:{color:"#e4ba48",fontWeight:"bold"},children:"Editing "}),"the work of ",e.jsxs("span",{style:{color:"#e4ba48",fontWeight:"bold"},children:[i.familyName," "]}),"for ",yt(t.row.createdAt)]})}),e.jsx(ie,{$mb:"40px",children:e.jsx(W,{initialValues:s,validationSchema:Gn,onSubmit:w,children:e.jsx(z,{autoComplete:"off",children:e.jsxs($,{direction:"row",spacing:1,useFlexGap:!0,flexWrap:"wrap",alignItems:"center",sx:{marginLeft:"10px",marginRight:"10px"},children:[e.jsx(We,{}),e.jsx(Ae,{name:"timeFrom"}),e.jsx(Ae,{name:"timeTo"}),e.jsx(ze,{}),e.jsx($e,{name:"typeOfJob"}),e.jsx(f,{component:b,sx:{maxWidth:100},id:"extra",type:"number",name:"extra",placeholder:"Extra"}),e.jsx(f,{component:b,sx:{maxWidth:100},id:"quantity",name:"quantity",type:"number",placeholder:"Quantity"}),e.jsx(Dt,{}),e.jsx(B,{text:"Write"})]})})})})]})}function Xn({row:t}){const[o,n]=m.useState(!1),r=()=>{n(!o)},a=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(k,{sx:{p:1,width:"100%",borderBottom:"1px solid rgba(40, 40, 40, 0.2)","&:hover":{backgroundColor:"rgba(40, 40, 40, 0.2)",color:"white"},backgroundColor:"transparent",color:"#247cc1",fontSize:"12px"},onClick:r,children:"Edit"}),e.jsx(Kn,{row:t,open:o,onClose:a})]})}const ea=ce(t=>e.jsx(lt,{elevation:0,anchorOrigin:{vertical:-10,horizontal:20},transformOrigin:{vertical:-9,horizontal:150},...t}))(({theme:t})=>({"& .MuiPaper-root":{borderRadius:5,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{zIndex:1,padding:"5px"},"& .MuiMenuItem-root":{minWidth:"120px","&:active":{backgroundColor:ct(t.palette.primary.main,t.palette.action.selectedOpacity)}}}})),ta=({row:t,fun:o,opacity:n})=>{const{query:r}=ae(),{visibility:a,toggle:l,hide:i}=Ve(),c=O(),u=m.useRef(null),x=s=>{s.target.classList.contains("MuiBackdrop-root")&&o()},d=()=>{c(je(t._id)).then(s=>{s.meta.requestStatus==="fulfilled"&&c(ee(r))}),y.info(`Job for ${t.employee.familyName} for ${Uo(t.createdAt)} deleted`,{position:"top-center",style:{background:"#e4ba48"}})};return e.jsxs(e.Fragment,{children:[e.jsx(I,{style:{opacity:`${n?"1":"0.1"}`,color:`${n?"#17c1bc":"gray"}`},sx:{p:.5,zIndex:5},ref:u,onClick:l,children:e.jsx(dt,{})}),e.jsxs(ea,{open:a,onClose:i,anchorEl:u.current,onClick:x,sx:{zIndex:8},children:[e.jsx(se,{sx:{p:.1},children:e.jsx(Xn,{row:t})}),e.jsx(se,{sx:{p:.1},children:e.jsx(k,{sx:{p:1,width:"100%",backgroundColor:"transparent","&:hover":{backgroundColor:"rgba(40, 40, 40, 0.2)",color:"white"},color:"#e44848",fontSize:"12px"},onClick:d,data:t._id,children:"Delete"})})]})]})},oa=ce(mt)(({theme:t})=>({"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover,whiteSpace:"nowrap"},"&:hover":{backgroundColor:"#dee6eb",cursor:"pointer"},"&:focus-visible":{backgroundColor:"#d3dce1"},"&:last-child td, &:last-child th":{border:0}}));function na({row:t}){const{visibility:o,hide:n,show:r}=Ve(),a=()=>{r()},l=()=>{n()};return e.jsx(e.Fragment,{children:e.jsxs(oa,{tabIndex:0,sx:{"&:last-child td, &:last-child th":{border:0},position:"relative"},onMouseLeave:l,onMouseEnter:a,"data-id":t._id,children:[e.jsx(T,{"data-id":t._id,align:"center",children:yt(t.createdAt)}),e.jsx(T,{align:"center",children:t.employee.registrationNumber}),e.jsx(T,{component:"th",align:"center",children:t.employee.familyName}),e.jsx(T,{align:"center",children:t.timeFrom==="-"?"-":Te(t.timeFrom)}),e.jsx(T,{align:"center",children:t.timeFrom==="-"?"-":Te(t.timeTo)}),e.jsx(T,{align:"center",children:t.totalHours}),e.jsx(T,{align:"center",children:t.detail&&t.detail.shortName!=="0"?t.detail.shortName:"-"}),e.jsx(T,{align:"center",children:t.typeOfJob}),e.jsx(T,{align:"center",children:t.extra}),e.jsx(T,{align:"center",children:t.quantity!==0?t.quantity:"-"}),e.jsx(T,{align:"center",children:t.master.name}),e.jsx(T,{align:"center",children:t.comment||"-"}),e.jsx(T,{align:"center",width:"15px",style:{position:"relative",right:0,top:0,padding:0},children:e.jsx(ta,{opacity:o,fun:l,row:t})})]},t._id)})}const A=ce(T)(({theme:t})=>({[`&.${Pe.head}`]:{backgroundColor:"#96b8cc",color:t.palette.common.white,padding:1},[`&.${Pe.body}`]:{fontSize:14,whiteSpace:"nowrap"}})),aa=m.memo(()=>{const{query:t}=ae(),[o,n]=m.useState(null),[r,a]=m.useState([]),l=j(Cn),i=j(Ot);return m.useLayoutEffect(()=>{n(null)},[t.createdAt]),m.useEffect(()=>{if(o){const c=i.filter(u=>u.employee.familyName===o);a(Xe(c))}else a(Xe(i))},[o,i]),l?e.jsx(ft,{}):r&&r.length?e.jsx(bo,{sx:{maxHeight:"63vh"},component:yo,children:e.jsxs(jo,{stickyHeader:!0,sx:{minWidth:700},"aria-label":"table of jobs",children:[e.jsx(Co,{children:e.jsxs(mt,{children:[e.jsx(A,{width:"25px",align:"center",children:"Date"}),e.jsx(A,{width:"10px",align:"center",children:"№"}),e.jsxs(A,{style:{backgroundColor:o?"#17c1bc":"#96b8cc",width:"17%"},align:"center",children:[e.jsx(Zn,{jobs:i,fun:n}),o||"Employee"]}),e.jsx(A,{width:"25px",align:"center",children:"From"}),e.jsx(A,{align:"center",children:"To"}),e.jsx(A,{align:"center",children:"H"}),e.jsx(A,{align:"center",children:"Detail"}),e.jsx(A,{width:"12%",align:"center",children:"Type of work"}),e.jsx(A,{width:"20px",align:"center",children:"Extra"}),e.jsx(A,{width:"30px",align:"center",children:"Quantity"}),e.jsx(A,{align:"center",children:"Master"}),e.jsx(A,{width:"30px",align:"center",children:"Comment"}),e.jsx(A,{width:"15px",align:"center",children:e.jsx(wo,{style:{paddingTop:"5px"}})})]})}),e.jsx(So,{children:r.map(c=>e.jsx(na,{row:c},c._id))})]})}):e.jsx("p",{style:{margin:"50px 0 30px",color:"gray",textAlign:"center",textTransform:"uppercase",fontSize:"18px"},children:"No work has been created today yet"})}),Be=t=>m.createElement("svg",{width:23,height:28,viewBox:"0 0 23 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1611 1.94523C16.3969 2.67942 18.0681 4.65875 18.3546 7.06311H17.9159C18.7607 7.06393 19.4453 7.74903 19.4453 8.59402C19.4453 9.13531 19.1644 9.611 18.7404 9.88322C19.2595 10.2627 19.5966 10.8761 19.5966 11.5684C19.5966 12.7204 18.6627 13.6544 17.5106 13.6544H17.0518C16.7382 14.6721 16.1314 15.5612 15.3301 16.2231V17.7625H17.7631C20.4152 17.7625 22.5652 19.9124 22.5652 22.5646V26.5966C22.5652 27.0219 22.2204 27.3667 21.7951 27.3667H1.48687C1.06157 27.3667 0.716797 27.0219 0.716797 26.5966V22.5646C0.716797 19.9125 2.86679 17.7625 5.51893 17.7625H8.06291V16.3124C7.20658 15.6421 6.55809 14.7185 6.23021 13.6544H5.77137C4.61929 13.6544 3.68536 12.7204 3.68536 11.5684C3.68536 10.8761 4.02253 10.2627 4.54161 9.88322C4.11759 9.61101 3.83666 9.13532 3.83666 8.59402C3.83666 7.74903 4.52125 7.06393 5.36605 7.06311H4.9274C5.21384 4.65876 6.88504 2.67943 9.12089 1.94524C9.37474 1.11891 10.144 0.518188 11.0535 0.518188H12.2284C13.138 0.518188 13.9072 1.1189 14.1611 1.94523ZM9.03209 3.00546C7.37751 3.70081 6.15852 5.22772 5.8982 7.06311H17.3838C17.1235 5.22771 15.9045 3.7008 14.2499 3.00545V5.64661C14.2499 5.91242 14.0344 6.12791 13.7686 6.12791C13.5028 6.12791 13.2873 5.91242 13.2873 5.64661V2.53964C13.2873 1.95485 12.8132 1.48078 12.2284 1.48078H11.0535C10.4688 1.48078 9.99469 1.95485 9.99469 2.53964V5.64661C9.99469 5.91242 9.7792 6.12791 9.51339 6.12791C9.24758 6.12791 9.03209 5.91242 9.03209 5.64661V3.00546ZM21.6026 22.5646C21.6026 21.01 20.6787 19.6712 19.35 19.0673V26.4041H21.6026V22.5646ZM18.3874 26.4041V18.7756C18.1842 18.7423 17.9757 18.725 17.7631 18.725H17.3127V21.9585C17.3127 22.2243 17.0972 22.4398 16.8314 22.4398C16.5656 22.4398 16.3501 22.2243 16.3501 21.9585V18.725H14.9784L12.1594 21.6066V26.4041H18.3874ZM11.1968 26.4041V21.5467L8.40427 18.725H6.95715V21.9585C6.95715 22.2243 6.74167 22.4398 6.47585 22.4398C6.21004 22.4398 5.99455 22.2243 5.99455 21.9585V18.725H5.51893C5.36031 18.725 5.20394 18.7347 5.05036 18.7534L5.05036 26.4041H11.1968ZM4.08776 26.4041L4.08776 19.0007C2.67607 19.5681 1.67939 20.9499 1.67939 22.5646V26.4041H4.08776ZM14.3675 16.8586V17.7625H9.02551V16.9143C9.73755 17.261 10.5374 17.4556 11.3826 17.4556H11.8994C12.7888 17.4556 13.628 17.2401 14.3675 16.8586ZM11.7064 20.6932L9.75858 18.725H13.6317L11.7064 20.6932ZM5.36756 8.02571H17.9144C18.2283 8.02571 18.4827 8.28015 18.4827 8.59402C18.4827 8.90789 18.2283 9.16233 17.9144 9.16233H5.36756C5.05369 9.16233 4.79925 8.90789 4.79925 8.59402C4.79925 8.28015 5.05369 8.02571 5.36756 8.02571ZM17.2899 12.065V10.445H17.5106C18.1311 10.445 18.634 10.9479 18.634 11.5684C18.634 12.1888 18.1311 12.6918 17.5106 12.6918H17.2539C17.2777 12.4862 17.2899 12.277 17.2899 12.065ZM5.99209 10.445H5.77137C5.15092 10.445 4.64795 10.9479 4.64795 11.5684C4.64795 12.1888 5.15092 12.6918 5.77137 12.6918H6.02813C6.00432 12.4862 5.99209 12.277 5.99209 12.065V10.445ZM6.95468 10.1249H16.3273V12.065C16.3273 14.5105 14.3448 16.493 11.8994 16.493H11.3826C8.93714 16.493 6.95468 14.5105 6.95468 12.065V10.1249Z",fill:"white"})),ra=N(Be)`
  display: flex;
  width: 25px;
  height: 33px;
`;function ia(t){const o=j(Fe),{open:n,onClose:r}=t,[a,l]=m.useState([]),i=O(),c=()=>{i(St(a[1])),y.error(`Cотрудник ${a[0]} удалён`),setTimeout(()=>{u()},300)},u=()=>{r&&r(),setTimeout(()=>{l([])},200)};return e.jsx(U,{onClose:r,open:n,children:e.jsxs(Q,{sx:{width:"450px"},children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:u,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase",my:2},children:a.length>0?`Do you want to delete ${a[0]}`:"Select Employee For Delete"}),e.jsxs(ne,{sx:{width:"100%"},children:[e.jsx(R,{options:o,getOptionLabel:x=>x.familyName,disableClearable:!0,onChange:(x,d)=>{d._id&&l([d.familyName,d._id])},renderInput:x=>e.jsx(M,{...x,placeholder:"Employee",fullWidth:!0})}),e.jsxs(ko,{sx:{width:"100%",px:0,display:"flex"},children:[a.length>0&&e.jsx(k,{disabled:!(a.length>0),onClick:c,sx:{minWidth:"50%",p:2,my:4,flexGrow:1,backgroundColor:"#e44848","&:hover":{backgroundColor:"#c43838"}},children:"Yes"}),a.length>0&&e.jsx(k,{onClick:u,sx:{width:"50%",p:2,my:4,backgroundColor:"gray"},children:" No "})]})]})]})})}function sa(){const[t,o]=m.useState(!1),n=()=>{o(!t)},r=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"222",sx:{backgroundColor:"#e44848",boxShadow:"none",p:1,borderRadius:0,width:"0.5ch"},onClick:n,children:e.jsx(ra,{})}),e.jsx(ia,{open:t,onClose:r})]})}const la=N(Be)`
  display: flex;
  width: 25px;
  height: 33px;
`,ca={familyName:"",registrationNumber:void 0,mainJob:"n"},da=J().shape({familyName:g().required("Required"),registrationNumber:L().required("Required"),mainJob:g().required("Required")});function ma(t){const{open:o,onClose:n}=t,r=O(),a=()=>{n&&n()},l=(i,c)=>{i.mainJob=i.typeOfJob,delete i.typeOfJob,r(wt(i)),y.success(`Добавлен сотрудник ${i.familyName}`,{style:{background:"#17c1bc"}}),c.setSubmitting(!1),setTimeout(()=>{a()},300)};return e.jsx(U,{onClose:n,open:o,children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:a,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Add Employee"}),e.jsx(W,{initialValues:ca,validationSchema:da,onSubmit:l,children:({values:i})=>e.jsx(z,{children:e.jsxs(p,{container:!0,columns:1,children:[e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"familyName",name:"familyName",type:"text",placeholder:"Family and Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx($e,{name:"typeOfJob",sx:{maxWidth:"100%",width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"registrationNumber",type:"number",name:"registrationNumber",placeholder:"Reg Number"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},disabled:i.familyName===""||i.registrationNumber===void 0,text:"Add Employee"})})]})})})]})})}function ua(){const[t,o]=m.useState(!1),n=()=>{o(!t)},r=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"111",sx:{backgroundColor:"#17c1bc",boxShadow:"none",p:1,borderRadius:0},onClick:n,children:e.jsx(la,{})}),e.jsx(ma,{open:t,onClose:r})]})}const pa=N(Be)`
  display: flex;
  width: 25px;
  height: 33px;
`,ha={familyName:"",registrationNumber:void 0,mainJob:"kd",_id:void 0},xa=J().shape({familyName:g().required("Required"),registrationNumber:L().required("Required"),mainJob:g().required("Required")});function ga(t){const{open:o,onClose:n}=t,r=O(),a=()=>{n&&n()},l=i=>{i.mainJob=i.typeOfJob,i._id=i.employeeId,delete i.typeOfJob,delete i.employeeId,r(mn(i)),y.success(`Cотруднику ${i.familyName} внесены изменения`,{style:{background:"#17c1bc"}}),setTimeout(()=>{a()},300)};return e.jsx(U,{onClose:n,open:o,children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:a,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Select An Employee To Edit"}),e.jsx(W,{initialValues:ha,validationSchema:xa,onSubmit:l,children:e.jsx(z,{children:e.jsxs(p,{container:!0,columns:1,children:[e.jsx(p,{item:!0,xs:1,sx:{p:1,width:"100%"},children:e.jsx(We,{sx:{maxWidth:"100%",mx:0}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"familyName",name:"familyName",type:"text",placeholder:"Family and Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx($e,{name:"typeOfJob",sx:{minWidth:"100%",marginLeft:"0"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"registrationNumber",type:"number",name:"registrationNumber",placeholder:"Reg Number"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},text:"Edit"})}),e.jsx(p,{item:!0,xs:2,children:e.jsx(ne,{sx:{display:"flex",px:1,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"}})})]})})})]})})}function fa(){const[t,o]=m.useState(!1),n=()=>{o(!t)},r=()=>{o(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"222",sx:{backgroundColor:"#e4ba48",boxShadow:"none",p:1,borderRadius:0,width:"0.5ch"},onClick:n,children:e.jsx(pa,{})}),e.jsx(ga,{open:t,onClose:r})]})}const Ft=t=>m.createElement("svg",{width:71,height:71,viewBox:"0 0 71 71",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.0245 35.0601C51.0245 43.5702 44.0904 50.4689 35.5368 50.4689C26.9832 50.4689 20.0491 43.5702 20.0491 35.0601C20.0491 26.5501 26.9832 19.6513 35.5368 19.6513C44.0904 19.6513 51.0245 26.5501 51.0245 35.0601ZM48.1279 35.0601C48.1279 41.9786 42.4907 47.5871 35.5368 47.5871C28.5829 47.5871 22.9457 41.9786 22.9457 35.0601C22.9457 28.1416 28.5829 22.5331 35.5368 22.5331C42.4907 22.5331 48.1279 28.1416 48.1279 35.0601Z",fill:"white"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.90667 42.742L7.83047 43.0108L9.57315 43.2805L11.31 47.3126L8.92029 50.4781L8.71277 50.7395C6.57038 53.3857 6.74552 55.87 8.71278 57.8272L12.5663 61.6611C14.5335 63.6184 17.5354 63.7183 19.7289 61.6995L21.5562 60.2825L23.088 59.1687L27.0132 60.7308L27.1827 60.8031L27.742 64.7175L27.7809 65.0483C28.1468 68.4266 30.0363 70.0601 32.8184 70.0601H38.2681C41.0502 70.0601 43.2439 68.0189 43.3601 65.0483L43.6686 62.572L43.985 60.8012L45.2229 60.2733L47.9985 59.1687L50.2394 60.798L50.2681 60.784L51.4436 61.6955C53.6371 63.7143 56.6389 63.6144 58.6062 61.6572L62.4597 57.8233C64.4269 55.866 64.6021 53.3817 62.4597 50.7355L62.2522 50.4742L59.8624 47.3087L61.5993 43.2765L63.9967 42.9055L65.1668 42.742L65.4993 42.7037C68.8949 42.3441 70.5367 40.487 70.5367 37.7525V32.3962C70.5367 29.6618 68.4851 27.5057 65.4993 27.3915L63.8046 27.185L61.5993 26.8437L59.8624 22.8116L62.2521 19.6461L62.4597 19.3848C64.602 16.7385 64.4269 14.2542 62.4596 12.297L58.6061 8.46309C56.6389 6.50585 53.637 6.40593 51.4435 8.42473L50.2681 9.33625L50.2393 9.32226L47.9984 10.9515L45.2229 9.84691L43.9849 9.31908L43.6686 7.54823L43.3601 5.07194C43.2438 2.1013 41.0502 0.0601196 38.2681 0.0601196H32.8184C30.0363 0.0601196 28.1467 1.6936 27.7809 5.07194L27.7419 5.4027L27.1826 9.31716L27.0132 9.38942L23.088 10.9515L21.5561 9.83774L19.7289 8.42075C17.5354 6.40196 14.5335 6.50187 12.5662 8.45911L8.71274 12.293C6.74548 14.2502 6.57034 16.7346 8.71273 19.3808L8.92025 19.6421L11.31 22.8076L9.57311 26.8397L7.61285 27.1431L5.57421 27.3915C2.58837 27.5057 0.536743 29.6618 0.536743 32.3962V37.7525C0.536743 40.487 2.17858 42.3441 5.57422 42.7037L5.90667 42.742ZM38.2598 2.94192H32.8267C31.6442 2.94192 30.6857 3.89556 30.6857 5.07194L30.2385 9.1835C30.2385 9.1835 30.1339 11.2389 29.4229 11.6589C29.1736 11.8062 28.8562 11.9739 28.4962 12.1509C28.4185 12.1894 28.3375 12.2286 28.2537 12.2685C27.3604 12.6961 26.2596 13.163 25.288 13.5242C24.3014 13.9085 23.4636 14.2079 23.2108 14.272C22.5311 14.4444 20.883 13.0525 20.883 13.0525L18.6539 11.3018C18.4385 11.1344 18.2607 10.9941 18.1361 10.8952L17.6363 10.5027C16.8002 9.67084 15.4446 9.67084 14.6086 10.5027L10.7668 14.3249C9.93067 15.1567 9.93067 16.5054 10.7667 17.3372L13.3727 20.5592C13.3727 20.5592 14.7596 22.0861 14.5553 22.8834C14.1274 24.5535 12.4985 28.4466 11.8433 29.0984C11.512 29.4279 9.96555 29.7343 8.51738 29.9566L8.47777 29.9627C7.59284 30.0977 6.7492 30.2012 6.24775 30.2591L5.62259 30.3422C4.41073 30.4089 3.43329 31.2422 3.43329 32.4044L3.43329 37.7444C3.43329 38.9066 4.39181 39.8487 5.57422 39.8487L7.92608 40.0988V40.1108C9.19573 40.2554 11.3844 40.5652 11.8433 41.0219C12.4985 41.6737 14.1275 45.5667 14.5554 47.2369C14.7596 48.0341 13.3727 49.5611 13.3727 49.5611L10.7668 52.783C9.9307 53.6148 9.93071 54.9635 10.7668 55.7953L14.6086 59.6176C15.4447 60.4494 16.8003 60.4494 17.6363 59.6176L18.1362 59.225C18.2607 59.1261 18.4386 58.9858 18.6539 58.8184L20.883 57.0677C20.883 57.0677 22.5311 55.6759 23.2108 55.8483C23.4636 55.9124 24.3015 56.2117 25.2881 56.5961C26.2596 56.9572 27.3605 57.4241 28.2538 57.8517C28.3375 57.8916 28.4185 57.9309 28.4963 57.9693C28.8563 58.1464 29.1736 58.314 29.4229 58.4613C30.1339 58.8813 30.2385 60.9367 30.2385 60.9367L30.6858 65.0483C30.6858 66.2247 31.6443 67.1783 32.8267 67.1783H38.2598C39.4422 67.1783 40.4008 66.2247 40.4008 65.0483L40.8842 60.9612C40.8842 60.9612 41.0604 58.8176 41.6636 58.4613C41.7971 58.3824 42.1366 58.2166 42.5944 58.0061C44.2233 57.1874 47.4227 55.981 47.9616 55.8443C48.6414 55.6719 50.2895 57.0637 50.2895 57.0637L53.5361 59.6136C54.3722 60.4454 55.7278 60.4454 56.5639 59.6136L60.4057 55.7913C61.2418 54.9595 61.2418 53.6109 60.4057 52.779L57.7997 49.5571C57.7997 49.5571 56.4128 48.0301 56.6171 47.2329C57.045 45.5627 58.674 41.6697 59.3291 41.0179C59.9843 40.3661 63.9118 40.0175 63.9118 40.0175L65.4993 39.8487C66.6817 39.8487 67.6402 38.9066 67.6402 37.7444V32.4044C67.6402 31.2422 66.6628 30.4089 65.4509 30.3422L64.5579 30.2197C63.0134 30.0327 59.8226 29.5933 59.3291 29.1024C58.6739 28.4505 57.045 24.5575 56.617 22.8873C56.4128 22.0901 57.7997 20.5632 57.7997 20.5632L60.4056 17.3412C61.2417 16.5094 61.2417 15.1607 60.4056 14.3289L56.5638 10.5066C55.7277 9.67482 54.3722 9.67481 53.5361 10.5066L50.2894 13.0565C50.2894 13.0565 48.6413 14.4483 47.9616 14.2759C47.4226 14.1393 44.2232 12.9329 42.5944 12.1141C42.1366 11.9037 41.7971 11.7378 41.6636 11.6589C41.0604 11.3026 40.8842 9.15903 40.8842 9.15903L40.4007 5.07194C40.4007 3.89556 39.4422 2.94192 38.2598 2.94192Z",fill:"white"})),ba=N(Ft)`
  display: flex;
  width: 33px;
  height: 33px;
`,ya={shortName:"",longName:"",normOfMinute:void 0,customer:""},ja=J().shape({shortName:g().required("Required"),longName:g().required("Required"),normOfMinute:L(),customer:g().required("Required")});function Ca(t){const{open:o,onClose:n}=t,r=O(),a=()=>{n&&n()},l=(i,c)=>{r(un(i)),y.success(`Добавлена деталь ${i.shortName}`,{style:{background:"#17c1bc"}}),c.setSubmitting(!1),setTimeout(()=>{a()},300)};return e.jsx(U,{onClose:n,open:o,children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:a,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Add Detail"}),e.jsx(W,{initialValues:ya,validationSchema:ja,onSubmit:l,children:({values:i})=>e.jsx(z,{children:e.jsxs(p,{container:!0,columns:1,children:[e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"shortName",name:"shortName",type:"text",placeholder:"Short Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"longName",name:"longName",type:"text",placeholder:"Long Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"normOfMinute",name:"normOfMinute",value:i.normOfMinute?i.normOfMinute:!1,type:"number",placeholder:"Norm Of Minute"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"customer",name:"customer",type:"text",placeholder:"Customer",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},disabled:i.shortName===""||i.longName==="",text:"Add Detail"})})]})})})]})})}function ot(){const t=j(fe),[o,n]=m.useState(!1),r=()=>{n(!o)},a=()=>{n(!1)};return t==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"111",sx:{backgroundColor:"#17c1bc",boxShadow:"none",p:1,borderRadius:50,minWidth:"57px",mx:1},onClick:r,children:e.jsx(ba,{})}),e.jsx(Ca,{open:o,onClose:a})]})}const wa=N(Ft)`
  display: flex;
  width: 33px;
  height: 33px;
`,Sa={detailId:"",shortName:"",longName:"",normOfMinute:void 0,customer:""},ka=J().shape({shortName:g().required("Required"),longName:g().required("Required"),normOfMinute:L().nullable(),customer:g().required("Required")});function Na(t){const{open:o,onClose:n}=t,r=O(),a=()=>{n&&n()},l=(i,c)=>{r(pn(i)),y.success(`Detail ${i.shortName} is updated`,{style:{background:"#17c1bc"}}),c.setSubmitting(!1),setTimeout(()=>{a()},300)};return e.jsx(U,{onClose:n,open:o,children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:a,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Update Detail"}),e.jsx(W,{initialValues:Sa,validationSchema:ka,onSubmit:l,children:({values:i})=>e.jsx(z,{children:e.jsxs(p,{container:!0,columns:1,children:[e.jsx(p,{item:!0,xs:1,sx:{p:1,width:"100%"},children:e.jsx(ze,{sx:{maxWidth:"100%",mx:0}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"shortName",name:"shortName",type:"text",placeholder:"Short Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"longName",name:"longName",type:"text",placeholder:"Long Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"normOfMinute",name:"normOfMinute",type:"number",value:i.normOfMinute?i.normOfMinute:!1,placeholder:"Norm Of Minute"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"customer",name:"customer",type:"text",placeholder:"Customer",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},disabled:i.shortName===""||i.longName==="",text:"Update Detail"})})]})})})]})})}function nt(){const t=j(fe),[o,n]=m.useState(!1),r=()=>{n(!o)},a=()=>{n(!1)};return t==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"111",sx:{backgroundColor:"#e4ba48",boxShadow:"none",p:1,borderRadius:50,minWidth:"57px"},onClick:r,children:e.jsx(wa,{})}),e.jsx(Na,{open:o,onClose:a})]})}function $t({sx:t}){const{setFieldValue:o,values:n,errors:r,touched:a,handleChange:l}=_(),i=n.type,c=r.type;return e.jsx(R,{autoComplete:!1,id:"type",sx:[{display:"inline-flex",maxHeight:"100px"},...Array.isArray(t)?t:[t]],options:De,fullWidth:!0,getOptionLabel:u=>u,onChange:(u,x)=>{x&&(o("type",x),l("type"))},renderInput:u=>e.jsx(M,{...u,error:!i&&a.type,helperText:!i&&a.type?c:null,name:"type",placeholder:"Type"})})}const Oa={name:"",company:"",characteristics:"",size:"",diameter:0,type:"",price:0,currentQuantity:0},La=J().shape({name:g().required("Required"),company:g().required("Required"),characteristics:g().max(100,"Too Long!"),size:g(),diameter:L(),type:g().max(20,"Too Long!").oneOf(De,"Invalid type!").required("Required"),price:L(),currentQuantity:L()});function Ta(t){const{open:o,onClose:n}=t,r=O(),a=()=>{n&&n()},l=(i,c)=>{const u=Object.values(i).filter(Boolean).join(", ");r(we(i)),y.success(`Добавлена позиция: ${u}`,{style:{background:"#17c1bc"},autoClose:4e3}),c.setSubmitting(!1),setTimeout(()=>{a()},500)};return e.jsx(U,{onClose:a,open:o,children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:a,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Add Position to Storage"}),e.jsx(W,{initialValues:Oa,validationSchema:La,onSubmit:l,children:({values:i})=>e.jsx(z,{children:e.jsxs(p,{container:!0,columns:2,children:[e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"name",name:"name",type:"text",placeholder:"Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"company",name:"company",type:"text",placeholder:"Company",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"characteristics",name:"characteristics",type:"text",placeholder:"Characteristics",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"size",name:"size",type:"text",placeholder:"Size"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"diameter",name:"diameter",type:"number",placeholder:"Diameter",value:i.diameter===0?"":i.diameter})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx($t,{})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"price",name:"price",value:i.price===0?"":i.price,type:"number",placeholder:"Price"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},disabled:i.name===""||i.type===""||i.company==="",text:"Add Position"})})]})})})]})})}function Aa(){const[t,o]=m.useState(!1),n=j(fe),r=()=>{o(!t)},a=m.useCallback(()=>{o(!1)},[]);return n==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"storage",sx:{backgroundColor:"#17c1bc",boxShadow:"none",px:3,py:1,minWidth:"57px",mx:1,borderRadius:"7px"},onClick:r,children:e.jsx(No,{fontSize:"large"})}),e.jsx(Ta,{open:t,onClose:a})]})}const Ia=ce(Oo)(()=>({[`&.${Ue.root} .${Ue.selected}`]:{backgroundColor:"#17c1bc",color:"white","&:hover":{backgroundColor:"#17d1bc"}}}));function Da({onChange:t}){const{setFieldValue:o,values:n,handleChange:r}=_(),a=n.typeOperation,l=(i,c)=>{o("typeOperation",c),r("typeOperation"),t(c)};return e.jsxs(Ia,{fullWidth:!0,color:"info",value:a,id:"typeOperation",exclusive:!0,onChange:l,"aria-label":"Type of Operation",sx:{width:"80%",mx:6.7},size:"large",children:[e.jsx(Qe,{sx:{borderRadius:10},value:"Shipment",children:"Shipment"},"justify"),e.jsx(Qe,{sx:{borderRadius:10},value:"Arrival",children:"Arrival"},"right")]})}function Et({sx:t,storeHouse:o}){const{setFieldValue:n,setValues:r,values:a,errors:l,touched:i,handleChange:c}=_(),u=a.productId,x=l.productId;return e.jsx(R,{autoComplete:!1,id:"select-storehouse",sx:[{display:"inline-flex",maxHeight:"100px"},...Array.isArray(t)?t:[t]],options:o,fullWidth:!0,getOptionLabel:d=>`${d.name} ${d.diameter?d.diameter:d.size}`,isOptionEqualToValue:(d,s)=>d._id===s._id,onChange:(d,s)=>{s===null&&(r({...a,productId:"",name:"",company:"",characteristics:"",size:"",diameter:0,type:"",price:0}),n("productId",""),c("productId")),s&&(r({...a,name:s&&s.name?s.name:"",company:s&&s.company?s.company:"",characteristics:s&&s.characteristics?s.characteristics:"",size:s&&s.size?s.size:"",diameter:s&&s.diameter?s.diameter:0,type:s&&s.type?s.type:"",price:s&&s.price?s.price:0,productId:s&&s._id?s._id:""}),n("productId",s._id),c("productId"))},renderInput:d=>e.jsx(M,{...d,error:!u&&i.productId,helperText:!u&&i.productId?x:null,name:"productId",placeholder:"StoreHouse"})})}function Fa({sx:t}){const o=j(Fe),n=Me(o),{setFieldValue:r,values:a,errors:l,touched:i,handleChange:c}=_(),u=l.employeeId,x=a.employeeId;return e.jsx(e.Fragment,{children:e.jsx(R,{value:a.employeeId?n.get(a.employeeId):null,id:"select-employee-storage",sx:[...Array.isArray(t)?t:[t]],options:o,fullWidth:!0,getOptionLabel:d=>d.familyName,onChange:(d,s)=>{s&&(r("employeeId",s._id),c("employeeId"))},renderInput:d=>e.jsx(M,{error:!x&&i.employeeId,helperText:!x&&i.employeeId?u:null,...d,name:"employeeId",placeholder:"Employee"})})})}function $a({sx:t}){const{setFieldValue:o,values:n,errors:r,touched:a,handleChange:l}=_(),i=n.fromWhom,c=r.fromWhom;return e.jsx(R,{autoComplete:!1,id:"fromWhom",sx:[{display:"inline-flex",maxHeight:"100px"},...Array.isArray(t)?t:[t]],options:nn,fullWidth:!0,getOptionLabel:u=>u,onChange:(u,x)=>{x&&(o("fromWhom",x),l("fromWhom"))},renderInput:u=>e.jsx(M,{...u,error:!i&&a.fromWhom,helperText:!i&&a.fromWhom?c:null,name:"fromWhom",placeholder:"From Whom"})})}const Ea={productId:"",employeeId:"",box:0,amount:0,totalAmount:0,typeOperation:G.initial,fromWhom:"",comment:"",currentQuantityProduct:0},Ha=J().shape({productId:g().required("Required"),employeeId:g(),box:L(),amount:L().required("Required"),totalAmount:L().required("Required"),typeOperation:g().required("Required").oneOf(Object.values(G),""),fromWhom:g(),comment:g(),currentQuantityProduct:L()});function _a(t){const o=j(Je),[n,r]=m.useState(void 0),{open:a,onClose:l}=t,i=O(),c=m.useCallback(s=>{r(s),x(s)},[]),u=()=>{l&&l()},x=s=>{if(s==null)return"Select of Type Operation"},d=(s,h)=>{s.amount&&s.box===0&&(s.totalAmount=s.amount),s.amount&&s.box!=0&&(s.totalAmount=Number(s.amount)*Number(s.box)),s.employeeId===""&&(s.employeeId=null),i(Ne(s)).then(w=>{w.meta.requestStatus==="rejected"?(y.error(`Perhaps  ${s.totalAmount} more then possible in base`,{style:{background:"#e74c3c"},autoClose:2e3}),setTimeout(()=>{u()},100),h.setSubmitting(!1)):(y.success(`Added operation is ${s.typeOperation}`,{style:{background:"#17c1bc"},autoClose:2e3}),h.setSubmitting(!1),setTimeout(()=>{u()},300))}).catch(w=>{y.error(`Error ${w.message||"Unknown error"}`,{style:{background:"#e74c3c"},autoClose:3e3}),h.setSubmitting(!1),setTimeout(()=>{u()},300)})};return e.jsx(U,{onClose:u,open:a,children:e.jsxs(Q,{sx:{overflow:"hidden","@media (min-width: 600px)":{minWidth:600}},children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:u,children:e.jsx(V,{})})}),e.jsx(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Add Operation"}),n?null:e.jsx(ut,{sx:{color:"#17c1bc",textAlign:"center"},children:"Select Of Type Operation"}),e.jsx(W,{initialValues:Ea,validationSchema:Ha,onSubmit:d,children:({values:s,setFieldValue:h})=>e.jsx(z,{children:e.jsxs(p,{container:!0,columns:2,children:[e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(Da,{onChange:c})}),s.typeOperation&&e.jsxs(e.Fragment,{children:[e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(Et,{storeHouse:o})}),s.typeOperation&&s.typeOperation===G.Shipment||s.typeOperation===null?e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(Fa,{})}):null,s.typeOperation===G.Arrival||s.typeOperation===null?e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx($a,{})}):null,e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"box",name:"box",type:"number",placeholder:"Box",value:s.box===0?"":s.box})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"amount",name:"amount",type:"number",placeholder:"Amount",value:s.amount===0?"":s.amount})}),e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(f,{disabled:!0,component:b,sx:{width:"100%"},id:"totalAmount",name:"totalAmount",value:s.box&&s.amount?Number(s.box)*Number(s.amount):s.totalAmount===s.amount?"":s.amount,type:"number",placeholder:"Total amount (filling in auto)"})}),e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(st,{value:s.comment,variant:"outlined",id:"comment",name:"comment",minRows:3,maxRows:5,placeholder:"Comment",onChange:w=>h("comment",w.target.value)})}),e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},disabled:s.amount===0||s.typeOperation===null||s.typeOperation===G.Shipment&&s.employeeId===""||s.typeOperation===G.Shipment&&s.employeeId===null,text:"Add Operation"})})]})]})})})]})})}function va(){const[t,o]=m.useState(!1),n=m.useCallback(()=>{o(!t)},[t]),r=m.useCallback(()=>{o(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"storage",sx:{backgroundColor:"#17c1bc",boxShadow:"none",px:3,py:1,minWidth:"57px",mx:1,borderRadius:"7px",marginLeft:"auto"},onClick:n,children:e.jsx(Lo,{fontSize:"large"})}),e.jsx(_a,{open:t,onClose:r})]})}const Ra={productId:"",name:"",company:"",characteristics:"",size:"",diameter:0,type:"",price:0},Ma=J().shape({name:g().required("Required"),company:g().required("Required"),characteristics:g().max(100,"Too Long!"),size:g(),diameter:L(),type:g().max(20,"Too Long!").oneOf(De,"Invalid type!").required("Required"),price:L()});function qa(t){const o=j(Je),[n,r]=m.useState([]),[a,l]=m.useState([]),{open:i,onClose:c}=t,[u,x]=m.useState("none"),d=O(),s=u==="edit",h=u==="delete",w=u==="none";m.useEffect(()=>l(o),[o]);const D=()=>{c&&c(),setTimeout(()=>{x("none")},300)},Ee=async()=>{h&&await d(ke(n[1])).then(F=>{F.meta.requestStatus==="fulfilled"&&(setTimeout(()=>{r([]),D()},300),y.error(`Deleted position: ${n[0]}`))})},Mt=()=>{x("delete")},qt=()=>{x("edit")},Jt=(F,Wt)=>{s&&(d(Se(F)),y.success(`Edited position: ${F.name}`,{style:{background:"#17c1bc"},autoClose:4e3})),Wt.setSubmitting(!1),setTimeout(()=>{D()},500)};return e.jsx(U,{onClose:D,open:i,children:e.jsxs(Q,{children:[e.jsx($,{children:e.jsx(I,{"aria-label":"close",color:"inherit",size:"large",sx:{backgroundColor:"rgba(40, 40, 40, 0.1)",width:"fit-content",ml:"auto"},onClick:D,children:e.jsx(V,{})})}),e.jsxs(p,{container:!0,columns:2,children:[e.jsx(p,{item:!0,xs:2,sx:{p:1},children:w&&e.jsxs(Y,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:["Would you like to Deactivate or Edit ",e.jsx("br",{}),"a position?"]})}),w||s?e.jsx(p,{item:!0,xs:s?2:1,sx:{p:1},children:e.jsxs(k,{onClick:Mt,sx:{position:"relative",display:"flex",fontSize:"12px",color:"white",backgroundColor:"#247cc1",borderRadius:1.5,boxShadow:"none",py:1.7,px:3,mx:.5,width:"100%","&:hover":{backgroundColor:"#7690a0"}},children:[!w&&e.jsx(Ye,{})," ",s?"Click here to Deactivate":"Deactivate"]})}):null,w||h?e.jsx(p,{item:!0,xs:h?2:1,sx:{p:1},children:e.jsxs(k,{onClick:qt,sx:{position:"relative",display:"flex",fontSize:"12px",color:"white",backgroundColor:"#247cc1",borderRadius:1.5,boxShadow:"none",py:1.7,px:3,mx:.5,width:"100%","&:hover":{backgroundColor:"#7690a0"}},children:[!w&&e.jsx(Ye,{})," ",h?"Click here to Edit":"Edit"]})}):null]}),s?e.jsx(e.Fragment,{children:e.jsx(W,{initialValues:Ra,validationSchema:Ma,onSubmit:Jt,children:({values:F})=>e.jsx(z,{children:e.jsxs(p,{container:!0,columns:2,children:[e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(Et,{storeHouse:a})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"name",name:"name",type:"text",placeholder:"Name",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"company",name:"company",type:"text",placeholder:"Company",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,id:"characteristics",name:"characteristics",type:"text",placeholder:"Characteristics",sx:{width:"100%"}})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"size",name:"size",type:"text",placeholder:"Size"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"diameter",name:"diameter",type:"number",placeholder:"Diameter",value:F.diameter===0?"":F.diameter})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx($t,{})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(f,{component:b,sx:{width:"100%"},id:"price",name:"price",value:F.price===0?"":F.price,type:"number",placeholder:"Price"})}),e.jsx(p,{item:!0,xs:1,sx:{p:1},children:e.jsx(B,{sx:{m:0,width:"100%"},disabled:F.name===""||F.type===""||F.company==="",text:"Edit Position"})})]})})})}):h?e.jsx(e.Fragment,{children:e.jsxs(p,{container:!0,columns:2,children:[e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(ut,{sx:{color:"gray",textAlign:"center",textTransform:"uppercase"},children:"Select Position For Deactivate"})}),e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(It,{onChange:r,storeHouse:a})}),e.jsx(p,{item:!0,xs:2,sx:{p:1},children:e.jsx(k,{disabled:n.length===0,onClick:Ee,sx:{width:"100%",p:2,my:2,backgroundColor:"gray"},children:" Deactivate"})})]})}):null]})})}function Ja(){const[t,o]=m.useState(!1),n=j(fe),r=()=>{o(!t)},a=m.useCallback(()=>{o(!1)},[]);return n==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{"data-name":"storage",sx:{backgroundColor:"#f1c40f",boxShadow:"none",px:3,py:1,minWidth:"57px",mx:1,borderRadius:"7px"},onClick:r,children:e.jsx(To,{fontSize:"large"})}),e.jsx(qa,{open:t,onClose:a})]})}const Wa={query:xe,setQuery:void 0},Ht=m.createContext(Wa);function hr({children:t}){const[o,n]=m.useState({...xe}),r={query:o,setQuery:n};return e.jsx(Ht.Provider,{value:r,children:t})}function _t(){const t=m.useContext(Ht);if(!t)throw new Error("You must use QueryProviderStoreOperations");return t}function za({onChange:t}){const[o,n]=m.useState(""),{query:r,setQuery:a}=_t(),l=i=>{n(i.target.value),a&&a({...r,typeProduct:i.target.value}),i.target.value===""&&a&&a(xe),i.target.value==="Arrival"&&a?a({...r,type:i.target.value,typeProduct:""}):a&&a({...r,typeProduct:i.target.value,type:""}),t&&t(o)};return e.jsx(ne,{sx:{minWidth:200,left:"calc(50% - 300px)",color:"black",position:"relative",borderRadius:"3px"},children:e.jsxs(ye,{fullWidth:!0,sx:{"& div.MuiInputBase-root":{backgroundColor:"#96c8cc"},"& label.Mui-focused":{color:"white"},"& [data-shrink=false]":{color:"white",top:3},"& [data-shrink=true]":{color:"white",top:9}},children:[e.jsx(He,{sx:{fontSize:.7},id:"select-type-storehouse",children:"Filter"}),e.jsxs(Ao,{sx:[{display:"inline-flex",maxHeight:"100px",textTransform:"capitalize",backgroundColor:"#247cc1",minWidth:"25%",fontSize:"16px",color:"#2F4F4F"}],id:"select-type-storehouse",value:o,onChange:l,placeholder:"filter",children:[e.jsx(se,{value:"",children:e.jsx("em",{children:"None"})}),De.map(i=>e.jsx(se,{sx:{background:"transparent"},value:i,children:i[0].toUpperCase()+i.slice(1)},i))]})]})})}function Va(){const t=O(),[o,n]=m.useState(!1),{onChangeDate:r,setQuery:a,query:l}=ae(),i=c=>{c===null&&t(Oe("")),a&&a(v),c&&r&&r(c)};return m.useEffect(()=>{if(o){const c=setTimeout(()=>{n(!1)},1500);return()=>clearTimeout(c)}return()=>{}},[o,l]),e.jsxs(pt,{dateAdapter:ht,children:[e.jsx(Io,{slots:{openPickerIcon:Do},defaultValue:null,value:l.offset===v.offset?null:H(l.createdAt),disableFuture:!0,sx:{width:200},onChange:i,slotProps:{field:{clearable:!0,onClear:()=>{n(!0),a&&a(v)}}}}),o&&e.jsx(Fo,{sx:{position:"absolute",bottom:0,right:0},severity:"success",children:"Field cleared!"})]})}function at(){const t=O(),o=j(fe),{query:n}=ae(),r=async()=>{try{const a=await t(dn({limit:3e3,createdAt:n.createdAt,filterByMonth:!0})).unwrap();new Ko(a,"table",n.createdAt).init()}catch(a){a instanceof Error&&(y.error(`Ошибка загрузки – ${a.message}. Попробуйте ещё раз`,{style:{background:"#e44848"}}),console.error(`Ошибка загрузки – , ${a.message}`))}};return o==="admin"&&e.jsx(e.Fragment,{children:e.jsx(I,{sx:{p:1,border:"3px solid rgba(255, 255, 255, 0.2)","&:hover":{backgroundColor:"rgba(40, 40, 40, 0.1)",color:"orange"},backgroundColor:"transparent",color:"white"},onClick:r,children:e.jsx($o,{})})})}function Ba(){return e.jsxs($,{direction:"row",spacing:2,sx:{justifyContent:"center",alignItems:"center",marginLeft:"auto",marginRight:at()?"calc(50% - 140px)":"calc(50% - 105px)"},children:[e.jsx(Va,{}),at()||null]})}const Pa=m.memo(()=>{console.log("render ControlBox");const{pathname:t}=Ie(),o=O(),{query:n}=ae(),{query:r}=_t();return m.useLayoutEffect(()=>{o(ee(n)),o(te()),o(re()),o(q()),o(oe(r))},[o,n,r]),e.jsx(ne,{borderBottom:"3px solid #93a9b8",borderTop:"3px solid #93a9b8",position:"relative",marginTop:"10px",marginBottom:t!=="/storage"?"15px":"0",display:"flex",minHeight:"auto",flexDirection:"row",sx:{backgroundColor:"#96b8cc",p:0,ariaLabel:"Without label"},children:t!=="/storage"?e.jsxs(e.Fragment,{children:[e.jsx(ua,{}),e.jsx(fa,{}),e.jsx(sa,{}),ot&&e.jsx(ot,{}),nt&&e.jsx(nt,{}),e.jsx(Ba,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(Aa,{}),e.jsx(Ja,{}),e.jsx(za,{}),e.jsx(va,{})]})})}),Ua=m.memo(()=>{const{onChangeOffset:t,query:o}=ae(),n=j(Lt);return e.jsx(e.Fragment,{children:n&&o.lengthJobs<n||n&&n>v.limit&&n==o.lengthJobs?e.jsx(k,{"data-name":"111",sx:{fontSize:"12px",color:"white",backgroundColor:Number(o.lengthJobs)<Number(n)?"#96b8cc":"#e44848",boxShadow:"none",py:1.5,px:5,marginTop:"auto",width:"fit-content","&:hover":{backgroundColor:Number(o.lengthJobs)<Number(n)?"#7690a0":"#c54242"}},onClick:t,text:Number(o.lengthJobs)<Number(n)?"load more":"load again"}):null})});function vt(){return m.useContext(kt)}function Qa(){console.log("render MainPage");const t=j(de),o=vt(),n=_e();return m.useLayoutEffect(()=>{(t==null?void 0:t.type)===K.Storage&&n("/storage")},[n,t==null?void 0:t.type]),o===E.Auth?e.jsxs(Pn,{children:[e.jsx(it,{children:e.jsx("title",{children:"VOITTO-app"})}),e.jsxs(On,{children:[e.jsx(ie,{children:e.jsx(Pa,{})}),e.jsx(ie,{$paddingTablet:"10px",children:e.jsx(Qn,{})}),e.jsxs(ie,{className:"container",$mt:"10px",$overflow:"auto",style:{alignItems:"center",display:"flex",minHeight:"65vh",flexDirection:"column"},children:[e.jsx(aa,{}),e.jsx(Ua,{})]})]})]}):e.jsx(Yt,{to:"/entrance",replace:!0})}function Ya(){var x;const t=O(),{register:o,handleSubmit:n,formState:{errors:r}}=Zt({defaultValues:{email:"",password:""},mode:"onChange"}),[a,l]=m.useState(!1),i=()=>l(d=>!d),c=d=>{d.preventDefault()},u=d=>{t(he(d)).then(s=>{s.meta.requestStatus==="rejected"&&y.error("Введите верный логин или пароль")})};return e.jsxs(ne,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"29ch",color:"black"}},noValidate:!0,autoComplete:"off",onSubmit:n(u),children:[e.jsxs(ye,{sx:{m:1,width:"29ch"},variant:"filled",children:[e.jsx(He,{htmlFor:"email",children:"Login"}),e.jsx(Ze,{id:"email",type:"email",label:"Login",autoComplete:"off",...o("email",{required:"Укажите логин-почту"}),error:!!((x=r.email)!=null&&x.message)})]}),e.jsxs(ye,{sx:{m:1,width:"29ch"},variant:"filled",children:[e.jsx(He,{htmlFor:"password",children:"Password"}),e.jsx(Ze,{autoComplete:"off",id:"password",type:a?"text":"password",...o("password",{required:"Укажите пароль"}),endAdornment:e.jsx(Eo,{position:"end",children:e.jsx(I,{"aria-label":"toggle password visibility",onClick:i,onMouseDown:c,edge:"start",children:a?e.jsx(Ho,{}):e.jsx(_o,{})})}),label:"password"})]}),e.jsx(ye,{sx:{m:1,width:"29ch"},variant:"filled",children:e.jsx(vn,{type:"submit",top:"10px",children:"time to work"})})]})}function Za(){const t=_e(),o=j(de),n=vt();return m.useLayoutEffect(()=>{n===E.Auth&&((o==null?void 0:o.type)===K.Storage?(y.info("Добро пожаловать"),t("/storage")):(y.info("Добро пожаловать"),t("/")))},[n,t,o]),e.jsxs("main",{children:[e.jsx(it,{children:e.jsx("title",{children:"VOITTO"})}),e.jsxs("section",{className:"entrance",children:[e.jsx("h2",{className:"visually-hidden",children:"вход в приложение"}),e.jsx("div",{className:"container",children:e.jsxs("div",{className:"entrance__wrapper",children:[e.jsxs("p",{className:"entrance__title",children:["today: ",bt()]}),e.jsx(Ya,{})]})})]})]})}const Ga=m.lazy(()=>xt(()=>import("./not-found-COWNzj3d.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ka=m.lazy(()=>xt(()=>import("./storage-BVaXMhBf.js"),__vite__mapDeps([6,1,2,3,4,7])));function Xa(){return e.jsx(m.Suspense,{fallback:e.jsx(ft,{}),children:e.jsxs(co,{theme:Mo,children:[e.jsx(Vo,{}),e.jsx(Gt,{children:e.jsx(pt,{dateAdapter:ht,children:e.jsx(Bo,{history:gt,children:e.jsx(bn,{children:e.jsx(Nn,{children:e.jsxs(Kt,{children:[e.jsx(be,{path:"/",element:e.jsx(Qa,{})}),e.jsx(be,{path:"/entrance",element:e.jsx(Za,{})}),e.jsx(be,{path:"/storage",element:e.jsx(Ka,{})}),e.jsx(be,{path:"*",element:e.jsx(Ga,{})})]})})})})})})]})})}const er=mo({USER:xn.reducer,JOB:Nt.reducer,STOREHOUSE:At.reducer}),tr={400:!0,403:!0,404:!0,401:!0,500:!0,501:!0},or=t=>tr[t.status],nr=()=>{const t=uo.create({baseURL:tn,timeout:on});return t.interceptors.request.use(o=>{const n=le.get();return n&&o.headers&&(o.headers.authorization=`Bearer ${n}`),o}),t.interceptors.response.use(o=>o,o=>{var n,r,a,l;if(y.dismiss(),o.code==="ERR_NETWORK"&&le.drop(),o.response&&or(o.response))return((n=o.response)==null?void 0:n.status)===400&&(o.response.data.details?o.response.data.details.forEach(i=>{i.messages.forEach(c=>y.info(c))}):y.error(o.response.data.message)),((r=o.response)==null?void 0:r.status)!==401&&y.error(o.response.data.error),((a=o.response)==null?void 0:a.status)===500&&y.error(((l=o.response)==null?void 0:l.data.message)??o.message),Promise.reject(o)}),t},ar=nr(),Rt=po({reducer:er,middleware:t=>t({thunk:{extraArgument:{api:ar,browserHistory:gt}}})});Rt.dispatch(P());Xt.createRoot(document.getElementById("root")).render(e.jsxs(eo,{store:Rt,children:[e.jsx(to,{position:"top-center",theme:"colored",autoClose:2500}),e.jsx(Xa,{})]}));export{E as A,k as C,ft as L,Pn as M,hr as Q,K as U,j as a,ur as b,pr as c,_t as d,cr as e,oe as f,mr as g,yt as h,de as i,vt as j,q as k,ie as l,Pa as m,O as u};
