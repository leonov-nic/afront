import{r as u,j as o,B as h,l as M,k as A,H as O}from"./react-Dio0hGxI.js";import{a0 as j}from"./vendor-BhmLflw8.js";import{u as x,a as d,g as b,b as w,c as N,d as y,C as R,e as H,f,h as k,i as G,j as $,U as p,k as D,A as T,L,M as z,Q as E,l as g,m as P}from"./index-BDQ9sJ_s.js";import{ab as W}from"./mui-Kk0pvYWy.js";import{D as _}from"./mui-x-data-grid-CzUmpu9E.js";const Q=j.main`
  position: relative;
  display: flex;
  flex-direction: column;
  max-width: initial;
`,I=u.memo(()=>{const n=x(),m=d(b),e=d(w),r=d(N),{query:i,setQuery:c}=y(),[l,S]=u.useState(null),v=()=>{l&&n(H(l)).then(a=>{a.meta.requestStatus==="rejected"&&h.error("You must delete all operation Shipment  after ",{position:"top-center",style:{background:"#e74c3c"},autoClose:5e3}),a.meta.requestStatus==="fulfilled"&&n(f(i))}),h.info("Operation deleted",{position:"top-center",style:{background:"#e4ba48"},autoClose:2e3})};u.useEffect(()=>{},[e,i]);const C=[{field:"typeOperation",headerName:"Operation",flex:1,disableColumnMenu:!0,sortable:!1},{field:"employee.registrationNumber",headerName:"N",width:70,valueGetter:(a,t)=>{var s;return`${((s=t.employee)==null?void 0:s.registrationNumber)||"-"}`},hideSortIcons:!0,filterable:!1,sortable:!1,disableColumnMenu:!0},{field:"familyName",headerName:"Employee",flex:1,align:"left",valueGetter:(a,t)=>{var s;return`${((s=t.employee)==null?void 0:s.familyName)||"-"}`}},{field:"createdAt",headerName:"Date",sortable:!1,width:80,valueGetter:(a,t)=>`${k(t.createdAt)}`},{field:"product.name",headerName:"Position",flex:1,headerAlign:"center",align:"center",valueGetter:(a,t)=>`${t.product.name} ${t.product.size?t.product.size:t.product.type}`},{field:"totalAmount",headerName:"Quantity",headerAlign:"center",align:"center",type:"number",flex:1,disableColumnMenu:!0,sortable:!1},{field:"currentQuantityProduct",headerName:"Available",headerAlign:"center",align:"center",type:"number",flex:1,disableColumnMenu:!0,sortable:!1},{field:"fromWhom",headerName:"From Whom",flex:1,headerAlign:"center",align:"center",valueGetter:(a,t)=>`${t.fromWhom||"-"}`},{field:"comment",headerName:"Comment",type:"string",flex:1,headerAlign:"right",align:"right",valueGetter:(a,t)=>`${t.comment||"-"}`,disableColumnMenu:!0,sortable:!1}];return o.jsxs(W,{sx:{minHeight:650,width:"100%",minWidth:"735px",position:"relative","& .MuiDataGrid-columnHeader":{color:"#93a9b8"},"& .MuiTablePagination-displayedRows":{fontSize:"15px",fontWeight:"bold",color:"#17c1bc"},"& .MuiTablePagination-toolbar":{background:"white"},"& div.css-de9k3v-MuiDataGrid-selectedRowCount":{color:"#e74c3c",fontWeight:"bold"}},children:[o.jsx(_,{style:{width:"100%"},rows:e,getRowId:a=>a._id,columns:C,paginationMode:"server",rowCount:r,initialState:{pagination:{paginationModel:{pageSize:10}}},onPaginationModelChange:a=>{const t=a.page+1;c&&c({...i,page:t})},disableMultipleRowSelection:!0,pageSizeOptions:[10],checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:a=>S(a[0]),loading:m}),l&&o.jsx(R,{"data-name":"storage",sx:{backgroundColor:"#e74c3c",boxShadow:"none",px:4,py:1.8,minWidth:"57px",mx:1,position:"absolute",left:"12%",bottom:0},onClick:v,children:"delete row"})]})}),q=I;function J(){console.log("render Storage");const{query:n}=y(),m=d(b),e=d(G),r=x(),i=M(),{pathname:c}=A(),l=$();return u.useEffect(()=>{r(f(n))},[r,n]),u.useLayoutEffect(()=>{(e==null?void 0:e.type)!==p.Storage&&(e==null?void 0:e.type)!==p.Admin?i("/"):Promise.all([r(D()),r(f(n))]).then(()=>i("/storage")),l!==T.Auth&&i("/entrance")},[i,e==null?void 0:e.type,l,c,r,n]),m&&!e?o.jsx(L,{}):(e==null?void 0:e.type)===p.Regular?null:o.jsx(z,{children:o.jsxs(E,{children:[o.jsx(O,{children:o.jsx("title",{children:"VOITTO-STORAGE"})}),o.jsxs(Q,{children:[o.jsx(g,{children:o.jsx(P,{})}),o.jsx(g,{className:"container",$mt:"10px",$overflow:"auto",style:{alignItems:"center",display:"flex",minHeight:"65vh",flexDirection:"column"},children:o.jsx(q,{})})]})]})})}export{J as default};
